!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Component=t()}(this,(function(){"use strict";const e=(e,t)=>{const n=document,o={cfg:{orig:e},replace(e,t=e){const o=n.createElement("template");o.innerHTML=t;const s=o.content.firstChild.nextElementSibling;s.nodeName===e.nodeName?this.loop(e,s):e.parentElement.replaceChild(s,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),s=t.attributes||[],i=Object.keys(s).map(e=>s[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),i.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(o).replace(e,t)};return function t(n,o){const s=function e(t,n){return e.setState(t,n),t?e:e.container},i=t,r=i.validator,c=i.emitter,l=i.tweenState,a=i.springTo,d=i.storage,m=i.useAudio,f=i.onScroll,u=i.onLoop,p=i.devtools,g=i.memo?i.memo:function(e){return e},h=Object,y=RegExp;let v,N,w,b,C;return s.reactive=!0,s.immutable=!0,s.debug=!!p,s.scopedCss=!0,s.state=n,s.schema=o,s.i=(s.log=[{id:0,state:n,action:"init"}]).length,s.view=e=>e,s.middleware=[],s.uid=Math.random().toString(36).split(".")[1],(s.isNode="undefined"!=typeof process&&null!==process&&null!==process.versions&&null!==process.versions.node)||(N=window,w=document,b=requestAnimationFrame,(s.css=w.createElement("style")).id=s.uid,w.head.appendChild(s.css)),s.actions=e=>(s.actionsList=e,h.keys(e).forEach(t=>{if(void 0!==s[t])return!1;s[t]=n=>(s.action=t,e[t](n),s)}),s),s.freeze=g(e=>(h.isFrozen(e)||(h.keys(e).forEach(t=>s.freeze(e[t])),h.freeze(e)),e)),s.eq=g((e,t)=>{const n=h.keys,o=typeof e;return e&&t&&"object"===o&&o===typeof t?n(e).length===n(t).length&&n(e).every(n=>s.eq(e[n],t[n])):String(e)===String(t)}),s.setState=e=>{const t={...s.state,...e};if(d&&!s.done){const n=d.getItem(s,t);n&&(e={...e,...n})}if(s.done=!0,r&&s.schema){const e=g(r(t,s.schema)),n="State doesn't match schema:";if(e.length>0)throw console.error(n,"\n",e,"\n"),new Error(n+"\n"+JSON.stringify(e)+"\n")}if(s.prev=s.state,s.state={...s.state,...t},!s.eq(s.state,s.prev))return d&&s.done&&d.setItem(s,s.state),s.reactive&&s.render(s.container,s.ctx),C&&!s.isNode&&cancelAnimationFrame(C),s.debug&&!0!==s.tt&&(s.isNode&&(b=e=>setTimeout(()=>e(),1)),C=b(()=>{s.log.push({id:s.log.length,state:s.state,action:s.action||"setState"}),s.i=s.log.length-1})),s.immutable&&s.freeze(s.state),void 0!==c&&s.action&&c.emit(""+s.action,{...s.state}),s.middleware.forEach(e=>e({...s.state})),s.action=void 0,s},s.tweenState=(e,t)=>(void 0!==l?l(s,e,t):s(e),s),s.springTo=(e,t)=>(void 0!==a?a(s,e,t):s(e),s),s.useAudio=e=>(void 0!==m?m(e,s):s(e),s),s.onScroll=e=>(f&&f(e,s),s),u&&(s.onLoop=(e,t)=>{const n={minFps:15,targetFps:60,maxRestarts:1/0,runTime:1/0,forceSetTimeout:!1,autoResume:!0,...t};s.loop=s.loop?s.loop:new u({...s.state,...n},e,s),s.start=()=>s.loop.start(),s.stop=()=>s.loop.stop(),s.pause=()=>s.loop.pause(),s.resume=()=>s.loop.resume()}),s.on=(e,t)=>(void 0!==c&&c.on(e,t),s),s.once=(e,t)=>(void 0!==c&&c.on(e,n=>{t(n),c.off(e,t)}),s),s.off=(e,t)=>(void 0!==c&&c.off(e,t),s),s.go=function(e,t){let n;return n="f"===t?s.i+e:s.i-e,s.log[n]&&(s.i=n,s.tt=!0,s(s.log[n].state),s.tt=!1),s},s.rw=function(e){return e?s.go(e,"b"):(s.log[0]&&(s.tt=!0,s(s.log[0].state),s.tt=!1),s.i=0,s)},s.ff=function(e){return e?s.go(e,"f"):(s.log[s.log.length-1]&&(s.tt=!0,s(s.log[s.log.length-1].state),s.tt=!1),s.i=s.log.length-1,s)},s.setCss=function(){if(s&&!s.isNode&&s.css&&"function"==typeof s.style){let e=s.style(s.state);if(s.scopedCss){const t=s.container.id?"#":".";let n=s.container.id?s.container.id:s.container.className;n=n||s.uid;const o=new y(n+" ,\\s*\\.","gm"),i=new y(n+" ,\\s*#","gm"),r=new y(n+" ,\\s*([a-z\\.#])","gmi");e=g(((e,t,n)=>e.replace(/}/g,"}\n").replace(/\;\s*\n/g,";").replace(/{\s*\n/g,"{ ").replace(/^\s+|\s+$/gm,"\n").replace(/(^[\.#\w][\w\-]*|\s*,[\.#\w][\w\-]*)/gm,t+n+" $1").replace(o,", "+t+n+" ").replace(i,", "+t+n+" #").replace(r,", "+t+n+" $1").replace(/\n/g,"").replace(/\s\s+/g," "))(e,t,n))}const t=e.replace(/\n/g,"").replace(/\s\s+/g," ");s.css.innerHTML!==t&&(s.css.innerHTML=t)}},s.toString=function(){let e=s.view(s.state,s.ctx),t="";if(!s.done&&d){const t=d.getItem(s,s.state);s(t),e="function"==typeof s.view?s.view(t,s.ctx):e}return"function"==typeof s.style&&(t=s.style(s.state).replace(/^ {4}/gm,"")),g(((e,t)=>{let n="";if(e.outerHTML)t&&(n=`<style>${t}\n</style>\n`),n+=(""+e.outerHTML).replace(/^ {4}/gm,"");else if("string"==typeof e)try{n=JSON.parse(e),n=JSON.stringify(n,null,2)}catch(o){t&&(n=`<style>${t}\n</style>\n`),n+=(""+e).replace(/^ {4}/gm,"")}else("object"==typeof e||Array.isArray(e))&&(n=JSON.stringify(e,null,2));return n})(e,t))},s.render=function(t,n){if(s.isNode)return s.toString();let o;if(!s.html&&d){const e=d.getItem(s,s.state);o="function"==typeof s.view?s.view(e,s.ctx):null,s(e)}return w&&!s.html&&(t=w.querySelector(t)),(s.html=s.container=t)&&s.html.getContext&&(s.ctx=s.ctx?s.ctx:s.html.getContext(n||"2d")),v&&cancelAnimationFrame(v),v=b(()=>{if(s.css&&s.style&&s.setCss(),s.html)if(o="function"==typeof s.view?s.view(s.state,s.ctx):null,s.ctx)s.view(s.state,s.ctx);else try{e(s.html.firstElementChild,o.outerHTML?o.outerHTML:o)}catch(e){o&&o.outerHTML?(s.html.innerHTML="",s.html.append(o)):s.html.innerHTML=o}p&&s.html&&(s.html.firstChild.setAttribute("data-uid",s.uid),p.populateUI(s.html))}),s.html},s.isNode||(N.sjComponents=N.sjComponents||{},N.sjComponents[s.uid]=s),s}}));
//# sourceMappingURL=component.min.js.map
