!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Component=t()}(this,(function(){"use strict";const e=(e,t)=>{const n={cfg:{orig:e},replace(e,t=e){const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstChild.nextElementSibling;o.nodeName===e.nodeName?this.loop(e,o):e.parentElement.replaceChild(o,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),i=t.attributes||[],s=Object.keys(i).map(e=>i[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),s.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(n).replace(e,t)};return function t(n,o){const i=function e(t,n){return e.setState(t,n),t?e:e.container},s=t,r=s.validator,c=s.emitter,a=s.tweenState,l=s.storage,d=s.devtools,f=s.memo?s.memo:function(e){return e},u=Object,m=RegExp;let g,p,h,y,N;return i.reactive=!0,i.immutable=!0,i.debug=!!d,i.scopedCss=!0,i.state=n,i.schema=o,i.i=(i.log=[{id:0,state:n,action:"init"}]).length,i.view=e=>e,i.middleware=[],i.uid=Math.random().toString(36).split(".")[1],(i.isNode="undefined"!=typeof process&&null!==process&&null!==process.versions&&null!==process.versions.node)||(p=window,h=document,y=requestAnimationFrame,(i.css=h.createElement("style")).id=i.uid,h.head.appendChild(i.css)),i.actions=e=>(i.actionsList=e,u.keys(e).forEach(t=>{if(void 0!==i[t])return!1;i[t]=n=>(i.action=t,e[t](n),i)}),i),i.freeze=f(e=>(u.isFrozen(e)||(u.keys(e).forEach(t=>i.freeze(e[t])),u.freeze(e)),e)),i.eq=f((e,t)=>{const n=u.keys,o=typeof e;return e&&t&&"object"===o&&o===typeof t?n(e).length===n(t).length&&n(e).every(n=>i.eq(e[n],t[n])):String(e)===String(t)}),i.setState=e=>{const t={...i.state,...e};if(l&&!i.done){const n=l.getItem(i,t);n&&(e={...e,...n})}if(i.done=!0,r&&i.schema){const e=f(r(t,i.schema)),n="State doesn't match schema:";if(e.length>0)throw console.error(n,"\n",e,"\n"),new Error(n+"\n"+JSON.stringify(e)+"\n")}if(i.prev=i.state,i.state={...i.state,...t},!i.eq(i.state,i.prev))return l&&i.done&&l.setItem(i,i.state),i.reactive&&i.render(i.container),N&&!i.isNode&&cancelAnimationFrame(N),i.debug&&!0!==i.tt&&(i.isNode&&(y=e=>setTimeout(()=>e(),1)),N=y(()=>{i.log.push({id:i.log.length,state:i.state,action:i.action||"setState"}),i.i=i.log.length-1})),i.immutable&&i.freeze(i.state),void 0!==c&&i.action&&c.emit(""+i.action,{...i.state}),i.middleware.forEach(e=>e({...i.state})),i.action=void 0,i},i.tweenState=(e,t)=>(void 0!==a?a(i,e,t):i(e),i),i.on=(e,t)=>(void 0!==c&&c.on(e,t),i),i.once=(e,t)=>(void 0!==c&&c.on(e,n=>{t(n),c.off(e,t)}),i),i.off=(e,t)=>(void 0!==c&&c.off(e,t),i),i.go=function(e,t){let n;return n="f"===t?i.i+e:i.i-e,i.log[n]&&(i.i=n,i.tt=!0,i(i.log[n].state),i.tt=!1),i},i.rw=function(e){return e?i.go(e,"b"):(i.log[0]&&(i.tt=!0,i(i.log[0].state),i.tt=!1),i.i=0,i)},i.ff=function(e){return e?i.go(e,"f"):(i.log[i.log.length-1]&&(i.tt=!0,i(i.log[i.log.length-1].state),i.tt=!1),i.i=i.log.length-1,i)},i.setCss=function(){if(i&&!i.isNode&&i.css&&"function"==typeof i.style){let e=i.style(i.state);if(i.scopedCss){const t=i.container.id?"#":".";let n=i.container.id?i.container.id:i.container.className;n=n||i.uid;const o=new m(n+" ,\\s*\\.","gm"),s=new m(n+" ,\\s*#","gm"),r=new m(n+" ,\\s*([a-z\\.#])","gmi");e=f(((e,t,n)=>e.replace(/}/g,"}\n").replace(/\;\s*\n/g,";").replace(/{\s*\n/g,"{ ").replace(/^\s+|\s+$/gm,"\n").replace(/(^[\.#\w][\w\-]*|\s*,[\.#\w][\w\-]*)/gm,t+n+" $1").replace(o,", "+t+n+" ").replace(s,", "+t+n+" #").replace(r,", "+t+n+" $1").replace(/\n/g,"").replace(/\s\s+/g," "))(e,t,n))}const t=e.replace(/\n/g,"").replace(/\s\s+/g," ");i.css.innerHTML!==t&&(i.css.innerHTML=t)}},i.toString=function(){let e=i.view(i.state),t="";if(!i.done&&l){const t=l.getItem(i,i.state);i(t),e="function"==typeof i.view?i.view(t):e}return"function"==typeof i.style&&(t=i.style(i.state).replace(/^ {4}/gm,"")),f(((e,t)=>{let n="";if(e.outerHTML)t&&(n=`<style>${t}\n</style>\n`),n+=(""+e.outerHTML).replace(/^ {4}/gm,"");else if("string"==typeof e)try{n=JSON.parse(e),n=JSON.stringify(n,null,2)}catch(o){t&&(n=`<style>${t}\n</style>\n`),n+=(""+e).replace(/^ {4}/gm,"")}else("object"==typeof e||Array.isArray(e))&&(n=JSON.stringify(e,null,2));return n})(e,t))},i.render=function(t){if(i.isNode)return i.toString();let n="function"==typeof i.view?i.view(i.state):null;if(!i.html&&l){const e=l.getItem(i,i.state);n="function"==typeof i.view?i.view(e):null,i(e)}return h&&!i.html&&(t=h.querySelector(t)),i.html=i.container=t,g&&cancelAnimationFrame(g),g=y(()=>{if(i.css&&i.style&&i.setCss(),i.container&&n)try{e(i.container.firstElementChild,n.outerHTML?n.outerHTML:n)}catch(e){n.outerHTML?(i.container.innerHTML="",i.container.append(n)):i.container.innerHTML=n}d&&i.container&&(i.container.firstChild.setAttribute("data-uid",i.uid),d.populateUI(i.container))}),i.container},i.isNode||(p.sjComponents=p.sjComponents||{},p.sjComponents[i.uid]=i),i}}));
//# sourceMappingURL=component.min.js.map
