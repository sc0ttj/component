!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).tweenState=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var t=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(t){(function(){var e,n,o,r,a,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-a)/1e6},n=process.hrtime,r=(e=function(){var e;return 1e9*(e=n())[0]+e[1]})(),i=1e9*process.uptime(),a=r-i):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(e)})),n="undefined"==typeof window?e:window,o=["moz","webkit"],r="AnimationFrame",a=n["request"+r],i=n["cancel"+r]||n["cancelRequest"+r],u=0;!a&&u<o.length;u++)a=n[o[u]+"Request"+r],i=n[o[u]+"Cancel"+r]||n[o[u]+"CancelRequest"+r];if(!a||!i){var c=0,f=0,s=[];a=function(e){if(0===s.length){var n=t(),o=Math.max(0,1e3/60-(n-c));c=o+n,setTimeout((function(){var e=s.slice(0);s.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(o))}return s.push({handle:++f,callback:e,cancelled:!1}),f},i=function(e){for(var t=0;t<s.length;t++)s[t].handle===e&&(s[t].cancelled=!0)}}var l=function(e){return a.call(n,e)};l.cancel=function(){i.apply(n,arguments)},l.polyfill=function(e){e||(e=n),e.requestAnimationFrame=a,e.cancelAnimationFrame=i};var d={linear:e=>e,inQuad:e=>e*e,outQuad:e=>e*(2-e),inOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,inCubic:e=>e*e*e,outCubic:e=>--e*e*e+1,inOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,inQuart:e=>e*e*e*e,outQuart:e=>1- --e*e*e*e,inOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,inQuint:e=>e*e*e*e*e,outQuint:e=>1+--e*e*e*e*e,inOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,inElastic:e=>(.04-.04/e)*Math.sin(25*e)+1,outElastic:e=>.04*e/--e*Math.sin(25*e),inOutElastic:e=>(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1,inSin:e=>1+Math.sin(Math.PI/2*e-Math.PI/2),outSin:e=>Math.sin(Math.PI/2*e),inOutSin:e=>(1+Math.sin(Math.PI*e-Math.PI/2))/2,inExpo:e=>0===e?0:Math.pow(2,10*(e-1)),outExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOutExpo:function(e){if(0===e||1===e)return e;var t=2*e,n=t-1;return t<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},inBack:function(e,t){var n=void 0!==t?t:1.70158;return e*e*((n+1)*e-n)},outBack:function(e,t){var n=void 0!==t?t:1.70158,o=e/1-1;return o*o*((n+1)*o+n)+1},inOutBack:function(e,t=1.70158){var n=2*e,o=n-2,r=1.525*t;return n<1?.5*n*n*((r+1)*n-r):.5*(o*o*((r+1)*o+r)+2)}},p="undefined"!=typeof process&&"undefined"!=typeof require?require("perf_hooks").performance:window.performance,h="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?window.requestAnimationFrame:l,m=function(){},w=function(){return p&&p.now?p.now():Date.now()},v=function(){function e(e){this._c=e,this._c.ease=d[e.ease]||d[ease],this._c.onUpdate=e.onUpdate||m,this._c.onComplete=e.onComplete||m,this._c.delay=e.delay||0,this._c.duration=e.duration||200,e.paused||this.start()}var t=e.prototype;return t.start=function(){this._c.startTime=w(),function e(t){var n=t.delay,o=t.from,r=t.to,a=t.duration,i=t.startTime,u=t.ease,c=t.onUpdate,f=t.onComplete,s=w()-i;if(n>=s)t.frame=h((function(){return e(t)}))+1;else{var l=Math.min(1,(s-n)/a);t.progress=l;var d,p=o.length?o.map((function(e,t){var n=e+(r[t]-e)*u(l);return Number.isNaN(n)&&(n=e+(r[t]-e)*l),n})):(d=o+(r-o)*u(l),Number.isNaN(d)&&(d=o+(r-o)*l),d);c({...t,values:p}),1===l?f({...t,values:p}):t.frame=h((function(){return e(t)}))+1}}(this._c)},t.cancel=function(){cancelAnimationFrame(this._c.frame)},e}();return(e,t,n)=>{var o=n.onStart?n.onStart:m,r=n.onUpdate?n.onUpdate:m,a=n.onComplete?n.onComplete:m,i=!n.shouldSetState||n.shouldSetState,u=n.onSetState?n.onSetState:m;function c(e,t){Object.keys(e).forEach((n,o)=>{if(void 0!==e[n]){if("object"!=typeof e[n])return void t.push(e[n]);c(e[n],t)}})}"boolean"==typeof i&&(i=()=>i),n.frame=1,n.frameTotal=Math.ceil(.06*(n.delay+n.duration))+2;var f=[],s=[];return c(function(e){var n={};return Object.entries(e).forEach(e=>{var o=e[0],r=e[1];t[o]&&(n[o]=r)}),n}(e.state),f),c(t,s),new v({from:f||0,to:s||1,paused:n.paused||!1,delay:n.delay||0,duration:n.duration||200,ease:n.ease||"linear",frame:1,frameTotal:n.frameTotal||1,onUpdate:n=>{var a,c,f=(a=t,c=[...n.values],Object.entries(a).reduce((function e(t,[n,o]){return t[n]=o,"number"==typeof o?t[n]=c.shift():"object"==typeof o&&(t[n]=Object.entries(o).reduce(e,{})),t}),{}));return 1===n.frame&&o(n),i(n)&&(e.setState(f),u(n)),r({...n,tweenedState:f})},onComplete:n=>(e.setState(t),a(n))})}}));
