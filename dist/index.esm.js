const e=(e,t)=>{const n=document,o={cfg:{orig:e},replace(e,t=e){const o=n.createElement("template");o.innerHTML=t;const a=o.content.firstChild.nextElementSibling;a.nodeName===e.nodeName?this.loop(e,a):e.parentElement.replaceChild(a,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),a=t.attributes||[],i=Object.keys(a).map(e=>a[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),i.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(o).replace(e,t)};function t(n,o){const a=function e(t,n){return e.setState(t,n),t?e:e.container},i=t,r=i.validator,s=i.emitter,l=i.tweenState,c=i.springTo,u=i.storage,d=i.useAudio,f=i.onScroll,p=i.onLoop,m=i.devtools,h=i.memo?i.memo:function(e){return e},y=Object,g=RegExp;let v,w,b,x,C;a.reactive=!0,a.immutable=!0,a.debug=!!m,a.scopedCss=!0,a.state=n,a.schema=o,a.i=(a.log=[{id:0,state:n,action:"init"}]).length,a.view=e=>e,a.middleware=[],a.uid=Math.random().toString(36).split(".")[1],(a.isNode="undefined"!=typeof process&&null!==process&&null!==process.versions&&null!==process.versions.node)||(w=window,b=document,x=requestAnimationFrame,(a.css=b.createElement("style")).id=a.uid,b.head.appendChild(a.css)),a.actions=e=>(a.actionsList=e,y.keys(e).forEach(t=>{if(void 0!==a[t])return!1;a[t]=n=>(a.action=t,e[t](n),a)}),a),a.freeze=h(e=>(y.isFrozen(e)||(y.keys(e).forEach(t=>a.freeze(e[t])),y.freeze(e)),e)),a.eq=h((e,t)=>{const n=y.keys,o=typeof e;return e&&t&&"object"===o&&o===typeof t?n(e).length===n(t).length&&n(e).every(n=>a.eq(e[n],t[n])):String(e)===String(t)}),a.setState=e=>{const t={...a.state,...e};if(u&&!a.done){const n=u.getItem(a,t);n&&(e={...e,...n})}if(a.done=!0,r&&a.schema){const e=h(r(t,a.schema)),n="State doesn't match schema:";if(e.length>0)throw console.error(n,"\n",e,"\n"),new Error(n+"\n"+JSON.stringify(e)+"\n")}if(a.prev=a.state,a.state={...a.state,...t},!a.eq(a.state,a.prev))return u&&a.done&&u.setItem(a,a.state),a.reactive&&a.render(a.container,a.ctx),C&&!a.isNode&&cancelAnimationFrame(C),a.debug&&!0!==a.tt&&(a.isNode&&(x=e=>setTimeout(()=>e(),1)),C=x(()=>{a.log.push({id:a.log.length,state:a.state,action:a.action||"setState"}),a.i=a.log.length-1})),a.immutable&&a.freeze(a.state),void 0!==s&&a.action&&s.emit(""+a.action,{...a.state}),a.middleware.forEach(e=>e({...a.state})),a.action=void 0,a},a.tweenState=(e,t)=>(void 0!==l?l(a,e,t):a(e),a),a.springTo=(e,t)=>(void 0!==c?c(a,e,t):a(e),a),a.useAudio=e=>(void 0!==d?d(e,a):a(e),a),a.onScroll=e=>(f&&f(e,a),a),p&&(a.onLoop=(e,t)=>{const n={minFps:15,targetFps:60,maxRestarts:1/0,runTime:1/0,forceSetTimeout:!1,autoResume:!0,...t};a.loop=a.loop?a.loop:new p({...a.state,...n},e,a),a.start=()=>a.loop.start(),a.stop=()=>a.loop.stop(),a.pause=()=>a.loop.pause(),a.resume=()=>a.loop.resume()}),a.on=(e,t)=>(void 0!==s&&s.on(e,t),a),a.once=(e,t)=>(void 0!==s&&s.on(e,n=>{t(n),s.off(e,t)}),a),a.off=(e,t)=>(void 0!==s&&s.off(e,t),a),a.go=function(e,t){let n;return n="f"===t?a.i+e:a.i-e,a.log[n]&&(a.i=n,a.tt=!0,a(a.log[n].state),a.tt=!1),a},a.rw=function(e){return e?a.go(e,"b"):(a.log[0]&&(a.tt=!0,a(a.log[0].state),a.tt=!1),a.i=0,a)},a.ff=function(e){return e?a.go(e,"f"):(a.log[a.log.length-1]&&(a.tt=!0,a(a.log[a.log.length-1].state),a.tt=!1),a.i=a.log.length-1,a)},a.setCss=function(){if(a&&!a.isNode&&a.css&&"function"==typeof a.style){let e=a.style(a.state);if(a.scopedCss){const t=a.container.id?"#":".";let n=a.container.id?a.container.id:a.container.className;n=n||a.uid;const o=new g(n+" ,\\s*\\.","gm"),i=new g(n+" ,\\s*#","gm"),r=new g(n+" ,\\s*([a-z\\.#])","gmi");e=h(((e,t,n)=>e.replace(/}/g,"}\n").replace(/\;\s*\n/g,";").replace(/{\s*\n/g,"{ ").replace(/^\s+|\s+$/gm,"\n").replace(/(^[\.#\w][\w\-]*|\s*,[\.#\w][\w\-]*)/gm,t+n+" $1").replace(o,", "+t+n+" ").replace(i,", "+t+n+" #").replace(r,", "+t+n+" $1").replace(/\n/g,"").replace(/\s\s+/g," "))(e,t,n))}const t=e.replace(/\n/g,"").replace(/\s\s+/g," ");a.css.innerHTML!==t&&(a.css.innerHTML=t)}};return a.toString=function(){let e=a.view(a.state,a.ctx),t="";if(!a.done&&u){const t=u.getItem(a,a.state);a(t),e="function"==typeof a.view?a.view(t,a.ctx):e}return"function"==typeof a.style&&(t=a.style(a.state).replace(/^ {4}/gm,"")),h(((e,t)=>{let n="";if(e.outerHTML)t&&(n=`<style>${t}\n</style>\n`),n+=(""+e.outerHTML).replace(/^ {4}/gm,"");else if("string"==typeof e)try{n=JSON.parse(e),n=JSON.stringify(n,null,2)}catch(o){t&&(n=`<style>${t}\n</style>\n`),n+=(""+e).replace(/^ {4}/gm,"")}else("object"==typeof e||Array.isArray(e))&&(n=JSON.stringify(e,null,2));return n})(e,t))},a.render=function(t,n){if(a.isNode)return a.toString();let o;if(!a.html&&u){const e=u.getItem(a,a.state);o="function"==typeof a.view?a.view(e,a.ctx):null,a(e)}return b&&!a.html&&(t=b.querySelector(t)),(a.html=a.container=t)&&a.html.getContext&&(a.ctx=a.ctx?a.ctx:a.html.getContext(n||"2d")),v&&cancelAnimationFrame(v),v=x(()=>{if(a.css&&a.style&&a.setCss(),a.html)if(o="function"==typeof a.view?a.view(a.state,a.ctx):null,a.ctx)a.view(a.state,a.ctx);else try{e(a.html.firstElementChild,o.outerHTML?o.outerHTML:o)}catch(e){o&&o.outerHTML?(a.html.innerHTML="",a.html.append(o)):a.html.innerHTML=o}m&&a.html&&(a.html.firstChild.setAttribute("data-uid",a.uid),m.populateUI(a.html))}),a.html},a.isNode||(w.sjComponents=w.sjComponents||{},w.sjComponents[a.uid]=a),a}const n=(e,t)=>{const n={cfg:{orig:e},replace(e,t=e){const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstElementChild;o.nodeName===e.nodeName?this.loop(e,o):e.parentElement.replaceChild(o,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),a=t.attributes||[],i=Object.keys(a).map(e=>a[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),i.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(n).replace(e,t)};let o;const a=(e,t)=>{if(!window)return a;const a="function"==typeof e?e():e,i=document.querySelector(t);return o&&cancelAnimationFrame(o),o=requestAnimationFrame(()=>{i&&i.nodeName&&a&&n(i,a.outerHTML?a.outerHTML:`<${i.nodeName} ${i.id?`id="${i.id}"`:""} ${i.className?`class="${i.className}"`:""}>${a}</${i.nodeName}>`)}),i};for(var i=("undefined"!=typeof process&&"undefined"!=typeof require?require("perf_hooks").performance:window.performance).now,r="undefined"==typeof window?global:window,s=["moz","webkit"],l="AnimationFrame",c=r["request"+l],u=r["cancel"+l]||r["cancelRequest"+l],d=0;!c&&d<s.length;d++)c=r[s[d]+"Request"+l],u=r[s[d]+"Cancel"+l]||r[s[d]+"CancelRequest"+l];if(!c||!u){var f=0,p=0,m=[];c=function(e){if(0===m.length){var t=i(),n=Math.max(0,1e3/60-(t-f));f=n+t,setTimeout((function(){var e=m.slice(0);m.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(f)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return m.push({handle:++p,callback:e,cancelled:!1}),p},u=function(e){for(var t=0;t<m.length;t++)m[t].handle===e&&(m[t].cancelled=!0)}}"undefined"!=typeof module&&(module.exports.raf=function(e){return c.call(r,e)},module.exports.cancel=function(){u.apply(r,arguments)},module.exports.polyfill=function(e){e||(e=r),e.requestAnimationFrame=c,e.cancelAnimationFrame=u});const h={linear:e=>e,inQuad:e=>e*e,outQuad:e=>e*(2-e),inOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,inCubic:e=>e*e*e,outCubic:e=>--e*e*e+1,inOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,inQuart:e=>e*e*e*e,outQuart:e=>1- --e*e*e*e,inOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,inQuint:e=>e*e*e*e*e,outQuint:e=>1+--e*e*e*e*e,inOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,inElastic:e=>(.04-.04/e)*Math.sin(25*e)+1,outElastic:e=>.04*e/--e*Math.sin(25*e),inOutElastic:e=>(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1,inSin:e=>1+Math.sin(Math.PI/2*e-Math.PI/2),outSin:e=>Math.sin(Math.PI/2*e),inOutSin:e=>(1+Math.sin(Math.PI*e-Math.PI/2))/2,inExpo:e=>0===e?0:Math.pow(2,10*(e-1)),outExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOutExpo:function(e){if(0===e||1===e)return e;var t=2*e,n=t-1;return t<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},inBack:function(e,t){var n=void 0!==t?t:1.70158;return e*e*((n+1)*e-n)},outBack:function(e,t){var n=void 0!==t?t:1.70158,o=e/1-1;return o*o*((n+1)*o+n)+1},inOutBack:function(e,t=1.70158){var n=2*e,o=n-2,a=1.525*t;return n<1?.5*n*n*((a+1)*n-a):.5*(o*o*((a+1)*o+a)+2)}};var y="undefined"!=typeof process&&"undefined"!=typeof require?require("perf_hooks").performance:window.performance,g="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?window.requestAnimationFrame:function(e){return c.call(r,e)},v=function(){},w=function(){return y&&y.now?y.now():Date.now()},b=function(){function e(e){this._c=e,this._c.ease=h[e.ease]||h[ease],this._c.onUpdate=e.onUpdate||v,this._c.onComplete=e.onComplete||v,this._c.delay=e.delay||0,this._c.duration=e.duration||200,e.paused||this.start()}var t=e.prototype;return t.start=function(){this._c.startTime=w(),function e(t){var n=t.delay,o=t.from,a=t.to,i=t.duration,r=t.startTime,s=t.ease,l=t.onUpdate,c=t.onComplete,u=w()-r;if(n>=u)t.frame=g((function(){return e(t)}))+1;else{var d=Math.min(1,(u-n)/i);t.progress=d;var f,p=o.length?o.map((function(e,t){var n=e+(a[t]-e)*s(d);return Number.isNaN(n)&&(n=e+(a[t]-e)*d),n})):(f=o+(a-o)*s(d),Number.isNaN(f)&&(f=o+(a-o)*d),f);l({...t,values:p}),1===d?c({...t,values:p}):t.frame=g((function(){return e(t)}))+1}}(this._c)},t.cancel=function(){cancelAnimationFrame(this._c.frame)},e}();const x=function(e,t){Object.keys(e).forEach((n,o)=>{if(void 0!==e[n]){if("object"!=typeof e[n])return void t.push(e[n]);x(e[n],t)}})},C=(e,t,n)=>{var o=n.onStart?n.onStart:v,a=n.onUpdate?n.onUpdate:v,i=n.onComplete?n.onComplete:v,r=!n.shouldSetState||n.shouldSetState,s=n.onSetState?n.onSetState:v;"boolean"==typeof r&&(r=()=>r),n.frame=1,n.frameTotal=Math.ceil(.06*(n.delay+n.duration))+2;var l=function(e,t){const n={};return Object.entries(e).forEach(e=>{const o=e[0],a=e[1];t[o]&&(n[o]=a)}),n}(e.state,t),c=[],u=[];return x(l,c),x(t,u),new b({from:c||0,to:u||1,paused:n.paused||!1,delay:n.delay||0,duration:n.duration||200,ease:n.ease||"linear",frame:1,frameTotal:n.frameTotal||1,onUpdate:n=>{var i,l,c=(i=t,l=[...n.values],Object.entries(i).reduce((function e(t,[n,o]){return t[n]=o,"number"==typeof o?t[n]=l.shift():"object"==typeof o&&(t[n]=Object.entries(o).reduce(e,{})),t}),{}));return 1===n.frame&&o(n),r(n)&&(e.setState(c),s(n)),a({...n,tweenedState:c})},onComplete:n=>(e.setState(t),i(n))})},S={on:function(e,t){this._evs=this._evs||{},this._evs[e]=this._evs[e]||[],this._evs[e].push(t)},off:function(e,t){if(this._evs=this._evs||{},e in this._evs==!1)return!1;this._evs[e].splice(this._evs[e].indexOf(t),1)},emit:function(e){if(this._evs=this._evs||{},e in this._evs==!1)return!1;for(var t=0;t<this._evs[e].length;t++)this._evs[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},k=(e,...t)=>(k.funcs=k.funcs||[],e.map((e,n)=>{k.i=k.i||n;var o=t[n]||"";"number"==typeof t[n]&&(o=t[n]);var a="attr";if(e.match(/style=("|')$/i)?a="style":e.match(/data-[a-z0-9\-_]+=("|')$/i)?a="dataAttr":"function"==typeof o&&o.uid&&o.state&&o.setState&&o.render?a="nestedComponent":"function"==typeof o&&"attr"===a&&e.match(/ on[a-z0-9]+=("|')$/i)&&(a="funcAttr"),o.nodeName&&"attr"===a)o=o.outerHTML;else if("nestedComponent"===a&&"function"==typeof o)e+=o.view(o.state),o="";else if("funcAttr"!==a||"function"!=typeof o||o.uid){if(Array.isArray(o))o[0].nodeName&&(o=o.map(e=>""+e.outerHTML)),o=o.join("");else if("object"==typeof o){var i="";if("dataAttr"===a)i+=JSON.stringify(o).trim();else for(var r in o)r&&o&&o.hasOwnProperty(r)&&"object"!=typeof o[r]&&("style"===a&&(i+=`${r}:${o[r]};`),"attr"===a&&(i+=` ${r}="${o[r]}"`));o=i}}else Array.isArray(k.funcs)&&(k.funcs[k.i]=o),o="",e+=k.i;return 0===t[n]&&(o="0"),k.i+=1,e?e+(o||""):""}).join("")),N=(e,...t)=>{var n=k(e,...t).trim();if(!document)return n;var o=document.createElement("template");o.innerHTML=n;for(var a=o.content.firstChild.children.length>0?o.content.firstChild.children:o.content.firstChild,i=0;i<a.length;i++)for(var r=a[i].attributes,s=0;s<r.length;s++){var l=r[s];l.name.match(/^on/)&&(a[i].removeAttribute(l.name),a[i].addEventListener(l.name.replace(/^on/,""),k.funcs[l.value]))}return o.content.firstChild},E={getItem:(e,t)=>{if(!e.store)return t;const n=JSON.parse(localStorage.getItem(e.store));return n?{...t,...n}:t},setItem:(e,t)=>{if(!e.store)return t;!e.isNode&&Component.syncTabs&&(window.syncTab=window.syncTab||[],window.syncTab[e.uid]||Component.syncTabs(e)),localStorage.setItem(e.store,JSON.stringify(t))}},A=function(e){!e.isNode&&window&&(window.addEventListener("storage",(function(t){if(t.key===e.store){let n=JSON.parse(t.newValue);e.setState({...e.state,...n})}})),window.syncTab[e.uid]=!0)},T=function(e,t){if(!document||!window||"object"!=typeof e)return;const n=Array.isArray,o=function(){},a=window.AudioContext||window.webkitAudioContext;window.audioCtx=window.audioCtx?window.audioCtx:new a,audioCtx.createGain||(audioCtx.createGain=audioCtx.createGainNode),audioCtx.createDelay||(audioCtx.createDelay=audioCtx.createDelayNode);const i={};let r=null,s=null,l=!1;const c=["gain","panning","reverb","equalizer","lowpass","lowshelf","peaking","notch","highpass","highshelf","bandpass","allpass","compression","analyser"],u={};window.totalFiles=window.totalFiles?window.totalFiles:0,window.totalFiles+=Object.keys(e).length,window.loadedFiles=window.loadedFiles?window.loadedFiles:0;const d=(e,t)=>{u[r]=p(e),i[r]=m(t),i.settings=(e,t)=>(Object.keys(i).forEach(t=>{i[t]&&"settings"!==t&&i[t].settings&&i[t].settings(e)}),"function"==typeof t&&t(i[audioObj].state),i),f(),!0===i[r].autoplay&&i[r].play()},f=()=>{window.loadedFiles+=1,window.totalFiles===window.loadedFiles&&document.dispatchEvent(new CustomEvent("audioLoaded",{detail:i}))},p=e=>{let t=audioCtx.createBuffer(e?e.numberOfChannels:2,e?e.length:0,e?e.sampleRate:audioCtx.sampleRate);for(var n=0,o=e.numberOfChannels;n<o;++n){let o=t.getChannelData(n),a=e.getChannelData(n);o.set(a,0)}return t},m=e=>{const t={name:r,src:s,play:x,playFrom:N,pause:k,fadeIn:O,fadeOut:F,rapidFire:S,stop:E,mute:A,unmute:T,connectTo:M,onPlay:e[1].onPlay||o,onPause:e[1].onPause||o,onResume:e[1].onResume||o,onStop:e[1].onStop||o,onChange:e[1].onChange||o,input:audioCtx.createBufferSource(),output:audioCtx.destination,audioNodes:[],state:{isPlaying:!1,volume:e[1].volume||1,muted:e[1].muted||!1,autoplay:e[1].autoplay||!1,loop:e[1].loop||!1,playbackRate:e[1].playbackRate||1,startTime:e[1].startTime||0,startOffset:e[1].startOffset||0},settings:function(e,n){return Object.keys(e).forEach(n=>{-1!==c.indexOf(n)&&g(t.state[n])!==g(e[n])&&(t.state={...t.state,...e},t.audioNodes=v(t),C(t),t.state.isPlaying&&t.playFrom(audioCtx.currentTime))}),t.state={...t.state,...e},h(t),y(t),"function"==typeof n&&n(t.state),t.onChange(t.state),t}};return t.audioNodes=v(t),t},h=e=>{const t=e.state;if("object"==typeof t.randomization){const n=t.randomization;n.volume&&(t.volume=t.volume+Math.random()*n.volume),n.playbackRate&&(t.playbackRate=t.playbackRate+Math.random()*n.playbackRate),n.startOffset&&(t.startOffset=t.startOffset+1*(.01+Math.random()*n.startOffset)),n.delay&&q(e,"delay")&&(t.delay=t.delay*(.01+Math.random()*n.delay))}},y=e=>{const t=e.state;e.input.loop=t.loop,e.input.playbackRate.value=t.playbackRate,Object.keys(t).forEach(n=>{let o=q(e,"volume"===n?"gain":n);o&&!g(t[n])&&b(e,o,t[n])})},g=e=>null==e||!1===e,v=e=>{const t=[e.input],o={},a={gain:e.state.volume,...l,...e.state};return Object.keys(a).forEach(t=>{const n=a[t];if(g(n))return;o[t]=w(e,t,n);const i="gain"===t?"volume":t;e.state[i]=n,o[t]&&b(e,o[t],n)}),c.forEach(a=>{o[a]&&"equalizer"!==a?t.push(o[a]):"equalizer"===a&&n(e.eq)&&e.eq.forEach(e=>t.push(e))}),t.push(e.output),t},w=(e,t,n)=>{let o=void 0;switch(t){case"gain":case"volume":o=audioCtx.createGain();break;case"panning":o=audioCtx.createStereoPanner?audioCtx.createStereoPanner():audioCtx.createPanner();break;case"delay":o=audioCtx.createDelay();break;case"lowpass":case"highpass":case"bandpass":case"allpass":case"lowshelf":case"highshelf":case"peaking":case"notch":o=audioCtx.createBiquadFilter();break;case"equalizer":o={type:"equalizer"},e.eq=[],n.forEach((t,o)=>{const a=audioCtx.createBiquadFilter();0===o?a.type="lowpass":o===n.length-1?a.type="highpass":a.type="peaking",e.eq.push(a)});break;case"reverb":o=audioCtx.createConvolver();break;case"analyser":o=audioCtx.createAnalyser();break;case"compression":o=audioCtx.createDynamicsCompressor()}return o&&(o.type=t),o},b=(e,t,o)=>{const a=t.type,i=audioCtx.currentTime,r=e=>"number"==typeof o||"number"==typeof o[e],s=(e,n)=>t[e].setValueAtTime(n,i);switch(a){case"volume":case"gain":let a=o<=0?1e-5:o;!0===e.state.mute&&(a=1e-5),t.gain.setValueAtTime(a,i);break;case"panning":if(audioCtx.createStereoPanner)s("pan","number"==typeof o?o:0);else{const e=0,n=1-Math.abs(o);t.setPosition(o,e,n),t.panValue=o}break;case"delay":s("delayTime","number"==typeof o?o:0);break;case"lowpass":case"highpass":case"bandpass":case"allpass":case"lowshelf":case"highshelf":case"peaking":case"notch":r("freq")&&t.frequency.setValueAtTime(o.freq,i),r("gain")&&t.gain.setValueAtTime(o.gain,i),r("q")&&t.Q.setValueAtTime(o.q,i);break;case"reverb":if(o){const n={duration:1,decay:1,reverse:!1,...e.state.reverb,...o};t.buffer=function(e,t,n){const o=audioCtx.sampleRate*e,a=audioCtx.createBuffer(2,o,audioCtx.sampleRate),i=a.getChannelData(0),r=a.getChannelData(1);let s;if(n)for(let e=0;e<o;e++){s=o-e;let n=Math.pow(1-s/o,t);i[s]=.5*Math.random()*n,r[s]=.5*Math.random()*n}else for(let e=0;e<o;e++){s=e;let n=Math.pow(1-s/o,t);i[e]=.5*Math.random()*n,r[e]=.5*Math.random()*n}return a}(n.duration,n.decay,n.reverse),e.state.reverb=n}else t.buffer=null;break;case"equalizer":n(e.eq)&&o.forEach((t,n)=>{const o=e.eq[n];"number"==typeof t.freq&&(o.frequency.value=t.freq),"number"==typeof t.gain&&(o.gain.value=t.gain),"number"==typeof t.q&&(o.Q.value=t.q)});break;case"analyser":r("fftSize")&&(t.fftSize=o.fftSize),r("minDecibels")&&(t.minDecibels=o.minDecibels),r("maxDecibels")&&(t.maxDecibels=o.maxDecibels),r("smoothingTimeConstant")&&(t.smoothingTimeConstant=o.smoothingTimeConstant),e.state.visualiser=t;break;case"compression":r("threshold")&&s("threshold",o.threshold),r("knee")&&s("knee",o.knee),r("ratio")&&s("ratio",o.ratio),r("attack")&&s("attack",o.attack),r("release")&&s("release",o.release)}},x=()=>{const e=i[r],t=e.state,o=audioCtx.createBufferSource();o.buffer=p(u[r]),h(e),o.loop=t.loop,o.playbackRate.value=t.playbackRate,e.input=o,e.audioNodes=v(e),C(e),y(e),o.start||(o.start=o.noteOn),o.start(t.startTime,t.startOffset%o.buffer.duration),t.isPlaying=!0,n(e.attachedSounds)&&e.attachedSounds.forEach(e=>{e.state.isPlaying||e.playFrom(audioCtx.currentTime)}),"number"==typeof t.fadeIn&&t.fadeIn>0&&O(t.fadeIn),0===t.startOffset&&e.onPlay(t),t.startOffset>0&&e.onResume(t)},C=e=>{e.audioNodes.forEach((t,n)=>{const o=t,a=e.audioNodes[n+1],i=n>0?e.audioNodes[n-1]:null;o&&a&&o.connect&&("equalizer"===a.type?(o.connect(e.eq[0]),e.eq.forEach((t,n)=>{e.eq[n]&&e.eq[n+1]&&e.eq[n].connect(e.eq[n+1])})):i&&"equalizer"===i.type?(e.eq[e.eq.length-1].connect(o),o.connect(a)):o.connect(a))})},S=(e,t)=>{const n=e||3,o=t||200;for(let e=0;e<n;e++){const e=i[r].state.loop;i[r].state.loop=!1,setTimeout(x,o),i[r].state.loop=e}},k=()=>{i[r].state.isPlaying&&(i[r].state.startOffset=audioCtx.currentTime-i[r].state.startTime,i[r].input.stop(0),i[r].state.isPlaying=!1,i[r].onPause(i[r].state),n(i[r].attachedSounds)&&i[r].attachedSounds.forEach(e=>{e.state.isPlaying&&e.pause()}))},N=e=>{try{i[r].input.stop(0)}catch(e){}i[r].state.startOffset=e,i[r].play()},E=()=>{i[r].state.isPlaying&&(i[r].input.stop(0),i[r].state.isPlaying=!1,i[r].state.startOffset=0,i[r].onStop(i[r].state),n(i[r].attachedSounds)&&i[r].attachedSounds.forEach(e=>{e.state.isPlaying&&e.stop()}))},A=()=>{i[r].state.prevVol=i[r].state.volume,i[r].settings({volume:0,muted:!0}),n(i[r].attachedSounds)&&i[r].attachedSounds.forEach(e=>{e.state.isPlaying&&e.mute()})},T=()=>{i[r].settings({volume:i[r].state.prevVol,prevVol:void 0,muted:!1}),n(i[r].attachedSounds)&&i[r].attachedSounds.forEach(e=>{e.state.isPlaying&&e.unmute()})},M=e=>{e.attachedSounds=e.attachedSounds||[],e.attachedSounds.push(i[r]),i[r].onChange(i[r].state)},q=(e,t)=>{if(e.audioNodes)return e.audioNodes.filter(e=>e.type===t)[0]},O=function(e,t){i[r].state.isPlaying||i[r].play(),I(t||1,e)},F=function(e){I(1e-5,e)},I=function(e,t){const n=q(i[r],"gain"),o=audioCtx.currentTime,a=i[r].state;n.gain.value=a.volume,a.isPlaying&&(n.gain.setValueAtTime(a.volume,o),n.gain.exponentialRampToValueAtTime(e,o+t),a.volume=e)};return Object.entries(e).forEach(e=>{const t="object"==typeof e[1]&&"object"==typeof e[1].filters;r=e[1].name||e[0],s=e[1].src||e[1],l=t?e[1].filters:void 0,i[r]=null,u[r]=null,((e,t)=>{if(u[r])return void d(u[r]);const n=new XMLHttpRequest;n.open("GET",e),n.responseType="arraybuffer",n.onload=function(){let e=n.response;audioCtx.decodeAudioData(e,(function(e){d(e,t)}))},n.onprogress=function(t){let n=0;return t.lengthComputable&&(n=t.loaded/t.total*100),document.dispatchEvent(new CustomEvent("audioProgress",{detail:{percent:n,url:e}})),n},n.send()})(s,e)}),t&&(t.audio=i),i},M=(e,t)=>{if(!document)return;const n=function(){document.body.getBoundingClientRect();const n=t.onScroll.offset||35,o=document.documentElement.clientHeight/100*n;requestAnimationFrame(n=>{const a=t.html.getBoundingClientRect(),i=a.top>o||a.bottom<o;let r=(o-a.top)/a.height;a.top>=o&&(r=0),a.bottom<=o&&(r=1),t.onScroll.frame=i?0:(t.onScroll.frame||0)+1;let s=null;0!==t.onScroll.frame&&(s=t.onScroll.prevPos<r?"down":"up");const l={frame:t.onScroll.frame,totalFrames:+n.toFixed(0),progress:+r.toFixed(2),direction:s};e(l),t.onScroll.prevPos=r})};t.onScroll.ready||(window.addEventListener("scroll",n),t.onScroll.ready=!0)};var q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var O=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e){var t,n;t=q,n=function(){var e=new WeakMap,t=[];return{useHooks:function(...e){return(e=e.map((function(e){return o.reset=function(){t.push(o);var e=n();try{for(let t of e.cleanups)"function"==typeof t&&t()}finally{t.pop(),e.stateSlots.length=0,e.effects.length=0,e.cleanups.length=0,e.memoizations.length=0,e.nextStateSlotIdx=0,e.nextEffectIdx=0,e.nextMemoizationIdx=0}},o;function o(...a){t.push(o);var i=n();i.nextStateSlotIdx=0,i.nextEffectIdx=0,i.nextMemoizationIdx=0;try{return e.apply(this,a)}finally{try{!function(e){for(let[t,[n,o]]of e.effects.entries())try{"function"==typeof n&&n()}finally{e.effects[t][0]=void 0}}(i)}finally{t.pop()}}}}))).length<2?e[0]:e},useState:o,useReducer:a,useEffect:function(e,...t){t.length>0?1==t.length&&Array.isArray(t[0])&&(t=t[0]):t=void 0;var o=n();if(!o)throw new Error("useEffect() only valid inside an Articulated Function or a Custom Hook.");{o.nextEffectIdx in o.effects||(o.effects[o.nextEffectIdx]=[]);let n=o.nextEffectIdx,a=o.effects[n];i(a[1],t)&&(a[0]=function(){if("function"==typeof o.cleanups[n])try{o.cleanups[n]()}finally{o.cleanups[n]=void 0}var t=e();"function"==typeof t&&(o.cleanups[n]=t)},a[1]=t),o.nextEffectIdx++}},useMemo:r,useCallback:function(e,...t){if(n())return r((function(){return e}),...t);throw new Error("useCallback() only valid inside an Articulated Function or a Custom Hook.")},useRef:function(e){if(n()){var[t]=o({current:e});return t}throw new Error("useRef() only valid inside an Articulated Function or a Custom Hook.")},useDeferred:function(){if(n()){const[e]=o(function(){let e,t;return{pr:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}());return e}throw new Error("useDeferred() only valid inside an Articulated Function or a Custom Hook.")},useThrottle:function(e,t,...a){if(!e)throw new TypeError("useThrottle() requires a function argument");if(!t)throw new TypeError("useThrottle() requires a timer argument");if(n()){const[n]=o({fn:e,timer:t,lastExecute:0});return a.length>0&&1===a.length&&Array.isArray(a[0])&&(a=a[0]),n.throttledFn&&!i(n.guards,a)||(n.guards=a,n.timer=t,n.fn=e,n.throttledFn=function(...e){const{fn:t,timer:o,lastExecute:a}=n,i=Date.now();if(a+o<i)try{t.apply(this,e)}finally{n.lastExecute=i}}),n.throttledFn}throw new Error("useThrottle() only valid inside an Articulated Function or a Custom Hook.")}};function n(){if(t.length>0){let n,o=t[t.length-1];return e.has(o)||(n={nextStateSlotIdx:0,nextEffectIdx:0,nextMemoizationIdx:0,stateSlots:[],effects:[],cleanups:[],memoizations:[]},e.set(o,n)),e.get(o)}}function o(e){if(n())return a((function(e,t){return"function"==typeof t?t(e):t}),e);throw new Error("useState() only valid inside an Articulated Function or a Custom Hook.")}function a(e,t,...o){var a=n();if(a){if(!(a.nextStateSlotIdx in a.stateSlots)){let n=["function"==typeof t?t():t,function(t){n[0]=e(n[0],t)}];a.stateSlots[a.nextStateSlotIdx]=n,o.length>0&&a.stateSlots[a.nextStateSlotIdx][1](o[0])}return[...a.stateSlots[a.nextStateSlotIdx++]]}throw new Error("useReducer() only valid inside an Articulated Function or a Custom Hook.")}function i(e,t){if(void 0===e||void 0===t)return!0;if(e.length!==t.length)return!0;for(let[n,o]of e.entries())if(!Object.is(o,t[n]))return!0;return!1}function r(e,...t){t.length>0?1==t.length&&Array.isArray(t[0])&&(t=t[0]):t=[e];var o=n();if(o){o.nextMemoizationIdx in o.memoizations||(o.memoizations[o.nextMemoizationIdx]=[]);let n=o.memoizations[o.nextMemoizationIdx];if(i(n[1],t))try{n[0]=e()}finally{n[1]=t}return o.nextMemoizationIdx++,n[0]}throw new Error("useMemo() only valid inside an Articulated Function or a Custom Hook.")}},e.exports?e.exports=n():Object.assign(t,n())})).hooks;export{t as Component,S as emitter,O as hooks,N as htmel,k as html,M as onScroll,a as render,E as storage,A as syncTabs,C as tweenState,T as useAudio};
//# sourceMappingURL=index.esm.js.map
