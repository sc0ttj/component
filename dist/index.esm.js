const e=(e,t)=>{const n={cfg:{orig:e},replace(e,t=e){const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstChild.nextElementSibling;o.nodeName===e.nodeName?this.loop(e,o):e.parentElement.replaceChild(o,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),i=t.attributes||[],r=Object.keys(i).map(e=>i[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),r.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(n).replace(e,t)};function t(n,o){const i=function e(t,n){return e.setState(t,n),t?e:e.container},r=t,a=r.validator,s=r.emitter,c=r.tweenState,l=r.storage,u=r.devtools,f=r.memo?r.memo:function(e){return e},d=Object,h=RegExp;let m,p,y,g,v;i.reactive=!0,i.immutable=!0,i.debug=!!u,i.scopedCss=!0,i.state=n,i.schema=o,i.i=(i.log=[{id:0,state:n,action:"init"}]).length,i.view=e=>e,i.middleware=[],i.uid=Math.random().toString(36).split(".")[1],(i.isNode="undefined"!=typeof process&&null!==process&&null!==process.versions&&null!==process.versions.node)||(p=window,y=document,g=requestAnimationFrame,(i.css=y.createElement("style")).id=i.uid,y.head.appendChild(i.css)),i.actions=e=>(i.actionsList=e,d.keys(e).forEach(t=>{if(void 0!==i[t])return!1;i[t]=n=>(i.action=t,e[t](n),i)}),i),i.freeze=f(e=>(d.isFrozen(e)||(d.keys(e).forEach(t=>i.freeze(e[t])),d.freeze(e)),e)),i.eq=f((e,t)=>{const n=d.keys,o=typeof e;return e&&t&&"object"===o&&o===typeof t?n(e).length===n(t).length&&n(e).every(n=>i.eq(e[n],t[n])):String(e)===String(t)}),i.setState=e=>{const t={...i.state,...e};if(l&&!i.done){const n=l.getItem(i,t);n&&(e={...e,...n})}if(i.done=!0,a&&i.schema){const e=f(a(t,i.schema)),n="State doesn't match schema:";if(e.length>0)throw console.error(n,"\n",e,"\n"),new Error(n+"\n"+JSON.stringify(e)+"\n")}if(i.prev=i.state,i.state={...i.state,...t},!i.eq(i.state,i.prev))return l&&i.done&&l.setItem(i,i.state),i.reactive&&i.render(i.container),v&&!i.isNode&&cancelAnimationFrame(v),i.debug&&!0!==i.tt&&(i.isNode&&(g=e=>setTimeout(()=>e(),1)),v=g(()=>{i.log.push({id:i.log.length,state:i.state,action:i.action||"setState"}),i.i=i.log.length-1})),i.immutable&&i.freeze(i.state),void 0!==s&&i.action&&s.emit(""+i.action,{...i.state}),i.middleware.forEach(e=>e({...i.state})),i.action=void 0,i},i.tweenState=(e,t)=>(void 0!==c?c(i,e,t):i(e),i),i.on=(e,t)=>(void 0!==s&&s.on(e,t),i),i.once=(e,t)=>(void 0!==s&&s.on(e,n=>{t(n),s.off(e,t)}),i),i.off=(e,t)=>(void 0!==s&&s.off(e,t),i),i.go=function(e,t){let n;return n="f"===t?i.i+e:i.i-e,i.log[n]&&(i.i=n,i.tt=!0,i(i.log[n].state),i.tt=!1),i},i.rw=function(e){return e?i.go(e,"b"):(i.log[0]&&(i.tt=!0,i(i.log[0].state),i.tt=!1),i.i=0,i)},i.ff=function(e){return e?i.go(e,"f"):(i.log[i.log.length-1]&&(i.tt=!0,i(i.log[i.log.length-1].state),i.tt=!1),i.i=i.log.length-1,i)},i.setCss=function(){if(i&&!i.isNode&&i.css&&"function"==typeof i.style){let e=i.style(i.state);if(i.scopedCss){const t=i.container.id?"#":".";let n=i.container.id?i.container.id:i.container.className;n=n||i.uid;const o=new h(n+" ,\\s*\\.","gm"),r=new h(n+" ,\\s*#","gm"),a=new h(n+" ,\\s*([a-z\\.#])","gmi");e=f(((e,t,n)=>e.replace(/}/g,"}\n").replace(/\;\s*\n/g,";").replace(/{\s*\n/g,"{ ").replace(/^\s+|\s+$/gm,"\n").replace(/(^[\.#\w][\w\-]*|\s*,[\.#\w][\w\-]*)/gm,t+n+" $1").replace(o,", "+t+n+" ").replace(r,", "+t+n+" #").replace(a,", "+t+n+" $1").replace(/\n/g,"").replace(/\s\s+/g," "))(e,t,n))}const t=e.replace(/\n/g,"").replace(/\s\s+/g," ");i.css.innerHTML!==t&&(i.css.innerHTML=t)}};return i.toString=function(){let e=i.view(i.state),t="";if(!i.done&&l){const t=l.getItem(i,i.state);i(t),e="function"==typeof i.view?i.view(t):e}return"function"==typeof i.style&&(t=i.style(i.state).replace(/^ {4}/gm,"")),f(((e,t)=>{let n="";if(e.outerHTML)t&&(n=`<style>${t}\n</style>\n`),n+=(""+e.outerHTML).replace(/^ {4}/gm,"");else if("string"==typeof e)try{n=JSON.parse(e),n=JSON.stringify(n,null,2)}catch(o){t&&(n=`<style>${t}\n</style>\n`),n+=(""+e).replace(/^ {4}/gm,"")}else("object"==typeof e||Array.isArray(e))&&(n=JSON.stringify(e,null,2));return n})(e,t))},i.render=function(t){if(i.isNode)return i.toString();let n="function"==typeof i.view?i.view(i.state):null;if(!i.html&&l){const e=l.getItem(i,i.state);n="function"==typeof i.view?i.view(e):null,i(e)}return y&&!i.html&&(t=y.querySelector(t)),i.html=i.container=t,m&&cancelAnimationFrame(m),m=g(()=>{if(i.css&&i.style&&i.setCss(),i.container&&n)try{e(i.container.firstElementChild,n.outerHTML?n.outerHTML:n)}catch(e){n.outerHTML?(i.container.innerHTML="",i.container.append(n)):i.container.innerHTML=n}u&&i.container&&(i.container.firstChild.setAttribute("data-uid",i.uid),u.populateUI(i.container))}),i.container},i.isNode||(p.sjComponents=p.sjComponents||{},p.sjComponents[i.uid]=i),i}const n=(e,t)=>{const n={cfg:{orig:e},replace(e,t=e){const n=document.createElement("template");n.innerHTML=t;const o=n.content.firstElementChild;o.nodeName===e.nodeName?this.loop(e,o):e.parentElement.replaceChild(o,e)},loop(t,n,o){(t||n)&&(this.checkNew(t,n,o),t&&n&&t.nodeName!==n.nodeName?this.checkNodeName(t,n):t&&n&&t.nodeName===n.nodeName&&(this.checkCtx(t,n),3!==t.nodeType&&8!==e.nodeType&&this.checkAttrs(t,n))),t&&n&&(t.childNodes&&n.childNodes?this.cfg.lengthDiff=[...e.childNodes,...n.childNodes]:this.cfg.lengthDiff=null,Array.apply(null,this.cfg.lengthDiff).forEach((e,o)=>{this.cfg.lengthDiff&&this.loop(t.childNodes[o],n.childNodes[o],t,n)}))},checkNodeName(e,t){const n=t.cloneNode(!0);e.parentElement.replaceChild(n,e)},checkAttrs(e,t){const n=e.attributes||[],o=Object.keys(n).map(e=>n[e]),i=t.attributes||[],r=Object.keys(i).map(e=>i[e]);o.forEach(n=>null!==t.getAttribute(n.name)?e.setAttribute(n.name,t.getAttribute(n.name)):e.removeAttribute(n.name)),r.forEach(n=>e.getAttribute(n.name)!==t.getAttribute(n.name)&&e.setAttribute(n.name,t.getAttribute(n.name)))},checkCtx(e,t){e.nodeValue!==t.nodeValue&&(e.textContent=t.textContent)},checkNew(e,t,n=this.cfg.orig){if(t&&void 0===e){const e=t.cloneNode(!0);3!==n.nodeType&&8!==n.nodeType&&n.appendChild(e)}else e&&void 0===t&&e.parentElement.removeChild(e)}};Object.create(n).replace(e,t)};let o;const i=(e,t)=>{if(!window)return i;const i="function"==typeof e?e():e,r=document.querySelector(t);return o&&cancelAnimationFrame(o),o=requestAnimationFrame(()=>{r&&r.nodeName&&i&&n(r,i.outerHTML?i.outerHTML:`<${r.nodeName} ${r.id?`id="${r.id}"`:""} ${r.className?`class="${r.className}"`:""}>${i}</${r.nodeName}>`)}),r};for(var r=("undefined"!=typeof process&&"undefined"!=typeof require?require("perf_hooks").performance:window.performance).now,a="undefined"==typeof window?global:window,s=["moz","webkit"],c="AnimationFrame",l=a["request"+c],u=a["cancel"+c]||a["cancelRequest"+c],f=0;!l&&f<s.length;f++)l=a[s[f]+"Request"+c],u=a[s[f]+"Cancel"+c]||a[s[f]+"CancelRequest"+c];if(!l||!u){var d=0,h=0,m=[];l=function(e){if(0===m.length){var t=r(),n=Math.max(0,1e3/60-(t-d));d=n+t,setTimeout((function(){var e=m.slice(0);m.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return m.push({handle:++h,callback:e,cancelled:!1}),h},u=function(e){for(var t=0;t<m.length;t++)m[t].handle===e&&(m[t].cancelled=!0)}}"undefined"!=typeof module&&(module.exports.raf=function(e){return l.call(a,e)},module.exports.cancel=function(){u.apply(a,arguments)},module.exports.polyfill=function(e){e||(e=a),e.requestAnimationFrame=l,e.cancelAnimationFrame=u});const p={linear:e=>e,inQuad:e=>e*e,outQuad:e=>e*(2-e),inOutQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,inCubic:e=>e*e*e,outCubic:e=>--e*e*e+1,inOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,inQuart:e=>e*e*e*e,outQuart:e=>1- --e*e*e*e,inOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,inQuint:e=>e*e*e*e*e,outQuint:e=>1+--e*e*e*e*e,inOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,inElastic:e=>(.04-.04/e)*Math.sin(25*e)+1,outElastic:e=>.04*e/--e*Math.sin(25*e),inOutElastic:e=>(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1,inSin:e=>1+Math.sin(Math.PI/2*e-Math.PI/2),outSin:e=>Math.sin(Math.PI/2*e),inOutSin:e=>(1+Math.sin(Math.PI*e-Math.PI/2))/2,inExpo:e=>0===e?0:Math.pow(2,10*(e-1)),outExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOutExpo:function(e){if(0===e||1===e)return e;var t=2*e,n=t-1;return t<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},inBack:function(e,t){var n=void 0!==t?t:1.70158;return e*e*((n+1)*e-n)},outBack:function(e,t){var n=void 0!==t?t:1.70158,o=e/1-1;return o*o*((n+1)*o+n)+1},inOutBack:function(e,t=1.70158){var n=2*e,o=n-2,i=1.525*t;return n<1?.5*n*n*((i+1)*n-i):.5*(o*o*((i+1)*o+i)+2)}};var y="undefined"!=typeof process&&"undefined"!=typeof require?require("perf_hooks").performance:window.performance,g="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l.call(a,e)},v=function(){},w=function(){return y&&y.now?y.now():Date.now()},b=function(){function e(e){this._c=e,this._c.ease=p[e.ease]||p[ease],this._c.onUpdate=e.onUpdate||v,this._c.onComplete=e.onComplete||v,this._c.delay=e.delay||0,this._c.duration=e.duration||200,e.paused||this.start()}var t=e.prototype;return t.start=function(){this._c.startTime=w(),function e(t){var n=t.delay,o=t.from,i=t.to,r=t.duration,a=t.startTime,s=t.ease,c=t.onUpdate,l=t.onComplete,u=w()-a;if(n>=u)t.frame=g((function(){return e(t)}))+1;else{var f=Math.min(1,(u-n)/r);t.progress=f;var d,h=o.length?o.map((function(e,t){var n=e+(i[t]-e)*s(f);return Number.isNaN(n)&&(n=e+(i[t]-e)*f),n})):(d=o+(i-o)*s(f),Number.isNaN(d)&&(d=o+(i-o)*f),d);c({...t,values:h}),1===f?l({...t,values:h}):t.frame=g((function(){return e(t)}))+1}}(this._c)},t.cancel=function(){cancelAnimationFrame(this._c.frame)},e}();const N=(e,t,n)=>{var o=n.onStart?n.onStart:v,i=n.onUpdate?n.onUpdate:v,r=n.onComplete?n.onComplete:v,a=!n.shouldSetState||n.shouldSetState,s=n.onSetState?n.onSetState:v;function c(e,t){Object.keys(e).forEach((n,o)=>{if(void 0!==e[n]){if("object"!=typeof e[n])return void t.push(e[n]);c(e[n],t)}})}"boolean"==typeof a&&(a=()=>a),n.frame=1,n.frameTotal=Math.ceil(.06*(n.delay+n.duration))+2;var l=[],u=[];return c(function(e){var n={};return Object.entries(e).forEach(e=>{var o=e[0],i=e[1];t[o]&&(n[o]=i)}),n}(e.state),l),c(t,u),new b({from:l||0,to:u||1,paused:n.paused||!1,delay:n.delay||0,duration:n.duration||200,ease:n.ease||"linear",frame:1,frameTotal:n.frameTotal||1,onUpdate:n=>{var r,c,l=(r=t,c=[...n.values],Object.entries(r).reduce((function e(t,[n,o]){return t[n]=o,"number"==typeof o?t[n]=c.shift():"object"==typeof o&&(t[n]=Object.entries(o).reduce(e,{})),t}),{}));return 1===n.frame&&o(n),a(n)&&(e.setState(l),s(n)),i({...n,tweenedState:l})},onComplete:n=>(e.setState(t),r(n))})},x={on:function(e,t){this._evs=this._evs||{},this._evs[e]=this._evs[e]||[],this._evs[e].push(t)},off:function(e,t){if(this._evs=this._evs||{},e in this._evs==!1)return!1;this._evs[e].splice(this._evs[e].indexOf(t),1)},emit:function(e){if(this._evs=this._evs||{},e in this._evs==!1)return!1;for(var t=0;t<this._evs[e].length;t++)this._evs[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},S=(e,...t)=>(S.funcs=S.funcs||[],e.map((e,n)=>{S.i=S.i||n;var o=t[n]||"";"number"==typeof t[n]&&(o=t[n]);var i="attr";if(e.match(/style=("|')$/i)?i="style":e.match(/data-[a-z0-9\-_]+=("|')$/i)?i="dataAttr":"function"==typeof o&&o.uid&&o.state&&o.setState&&o.render?i="nestedComponent":"function"==typeof o&&"attr"===i&&e.match(/ on[a-z0-9]+=("|')$/i)&&(i="funcAttr"),o.nodeName&&"attr"===i)o=o.outerHTML;else if("nestedComponent"===i&&"function"==typeof o)e+=o.view(o.state),o="";else if("funcAttr"!==i||"function"!=typeof o||o.uid){if(Array.isArray(o))o[0].nodeName&&(o=o.map(e=>""+e.outerHTML)),o=o.join("");else if("object"==typeof o){var r="";if("dataAttr"===i)r+=JSON.stringify(o).trim();else for(var a in o)a&&o&&o.hasOwnProperty(a)&&"object"!=typeof o[a]&&("style"===i&&(r+=`${a}:${o[a]};`),"attr"===i&&(r+=` ${a}="${o[a]}"`));o=r}}else Array.isArray(S.funcs)&&(S.funcs[S.i]=o),o="",e+=S.i;return 0===t[n]&&(o="0"),S.i+=1,e?e+(o||""):""}).join("")),A=(e,...t)=>{var n=S(e,...t).trim();if(!document)return n;var o=document.createElement("template");o.innerHTML=n;for(var i=o.content.firstChild.children.length>0?o.content.firstChild.children:o.content.firstChild,r=0;r<i.length;r++)for(var a=i[r].attributes,s=0;s<a.length;s++){var c=a[s];c.name.match(/^on/)&&(i[r].removeAttribute(c.name),i[r].addEventListener(c.name.replace(/^on/,""),S.funcs[c.value]))}return o.content.firstChild},C={getItem:(e,t)=>{if(!e.store)return t;const n=JSON.parse(localStorage.getItem(e.store));return n?{...t,...n}:t},setItem:(e,t)=>{if(!e.store)return t;!e.isNode&&Component.syncTabs&&(window.syncTab=window.syncTab||[],window.syncTab[e.uid]||Component.syncTabs(e)),localStorage.setItem(e.store,JSON.stringify(t))}},E=function(e){!e.isNode&&window&&(window.addEventListener("storage",(function(t){if(t.key===e.store){let n=JSON.parse(t.newValue);e.setState({...e.state,...n})}})),window.syncTab[e.uid]=!0)};var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var M=function(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}((function(e){var t,n;t=k,n=function(){var e=new WeakMap,t=[];return{useHooks:function(...e){return(e=e.map((function(e){return o.reset=function(){t.push(o);var e=n();try{for(let t of e.cleanups)"function"==typeof t&&t()}finally{t.pop(),e.stateSlots.length=0,e.effects.length=0,e.cleanups.length=0,e.memoizations.length=0,e.nextStateSlotIdx=0,e.nextEffectIdx=0,e.nextMemoizationIdx=0}},o;function o(...i){t.push(o);var r=n();r.nextStateSlotIdx=0,r.nextEffectIdx=0,r.nextMemoizationIdx=0;try{return e.apply(this,i)}finally{try{!function(e){for(let[t,[n,o]]of e.effects.entries())try{"function"==typeof n&&n()}finally{e.effects[t][0]=void 0}}(r)}finally{t.pop()}}}}))).length<2?e[0]:e},useState:o,useReducer:i,useEffect:function(e,...t){t.length>0?1==t.length&&Array.isArray(t[0])&&(t=t[0]):t=void 0;var o=n();if(!o)throw new Error("useEffect() only valid inside an Articulated Function or a Custom Hook.");{o.nextEffectIdx in o.effects||(o.effects[o.nextEffectIdx]=[]);let n=o.nextEffectIdx,i=o.effects[n];r(i[1],t)&&(i[0]=function(){if("function"==typeof o.cleanups[n])try{o.cleanups[n]()}finally{o.cleanups[n]=void 0}var t=e();"function"==typeof t&&(o.cleanups[n]=t)},i[1]=t),o.nextEffectIdx++}},useMemo:a,useCallback:function(e,...t){if(n())return a((function(){return e}),...t);throw new Error("useCallback() only valid inside an Articulated Function or a Custom Hook.")},useRef:function(e){if(n()){var[t]=o({current:e});return t}throw new Error("useRef() only valid inside an Articulated Function or a Custom Hook.")},useDeferred:function(){if(n()){const[e]=o(function(){let e,t;return{pr:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}}());return e}throw new Error("useDeferred() only valid inside an Articulated Function or a Custom Hook.")},useThrottle:function(e,t,...i){if(!e)throw new TypeError("useThrottle() requires a function argument");if(!t)throw new TypeError("useThrottle() requires a timer argument");if(n()){const[n]=o({fn:e,timer:t,lastExecute:0});return i.length>0&&1===i.length&&Array.isArray(i[0])&&(i=i[0]),n.throttledFn&&!r(n.guards,i)||(n.guards=i,n.timer=t,n.fn=e,n.throttledFn=function(...e){const{fn:t,timer:o,lastExecute:i}=n,r=Date.now();if(i+o<r)try{t.apply(this,e)}finally{n.lastExecute=r}}),n.throttledFn}throw new Error("useThrottle() only valid inside an Articulated Function or a Custom Hook.")}};function n(){if(t.length>0){let n,o=t[t.length-1];return e.has(o)||(n={nextStateSlotIdx:0,nextEffectIdx:0,nextMemoizationIdx:0,stateSlots:[],effects:[],cleanups:[],memoizations:[]},e.set(o,n)),e.get(o)}}function o(e){if(n())return i((function(e,t){return"function"==typeof t?t(e):t}),e);throw new Error("useState() only valid inside an Articulated Function or a Custom Hook.")}function i(e,t,...o){var i=n();if(i){if(!(i.nextStateSlotIdx in i.stateSlots)){let n=["function"==typeof t?t():t,function(t){n[0]=e(n[0],t)}];i.stateSlots[i.nextStateSlotIdx]=n,o.length>0&&i.stateSlots[i.nextStateSlotIdx][1](o[0])}return[...i.stateSlots[i.nextStateSlotIdx++]]}throw new Error("useReducer() only valid inside an Articulated Function or a Custom Hook.")}function r(e,t){if(void 0===e||void 0===t)return!0;if(e.length!==t.length)return!0;for(let[n,o]of e.entries())if(!Object.is(o,t[n]))return!0;return!1}function a(e,...t){t.length>0?1==t.length&&Array.isArray(t[0])&&(t=t[0]):t=[e];var o=n();if(o){o.nextMemoizationIdx in o.memoizations||(o.memoizations[o.nextMemoizationIdx]=[]);let n=o.memoizations[o.nextMemoizationIdx];if(r(n[1],t))try{n[0]=e()}finally{n[1]=t}return o.nextMemoizationIdx++,n[0]}throw new Error("useMemo() only valid inside an Articulated Function or a Custom Hook.")}},e.exports?e.exports=n():Object.assign(t,n())})).hooks;export{t as Component,x as emitter,M as hooks,A as htmel,S as html,i as render,C as storage,E as syncTabs,N as tweenState};
//# sourceMappingURL=index.esm.js.map
