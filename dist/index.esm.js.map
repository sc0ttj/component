{"version":3,"file":"index.esm.js","sources":["../src/component.js","../src/render.js","../src/raf.js","../src/easings.js","../src/tweenState.js","../src/emitter.js","../src/html.js","../src/htmel.js","../src/storage.js","../src/syncTabs.js"],"sourcesContent":["// Begin example implementation\n\n// Note:   This is just a demo/experiment\n// Goals:  Super easy to setup, small code base, automatic re-renders on state update\n;(\"use strict\")\n\n// t = target\n// s = source\nconst domDiff = (t, s) => { // from https://codepen.io/tevko/pen/LzXjKE?editors=0010\n  const job = {\n    cfg: {\n      orig: t\n    },\n    // t = target\n    // s = source\n    replace(t, s = t) {\n      const v = document.createElement(\"template\")\n      v.innerHTML = s\n      const vHTML = v.content.firstChild.nextElementSibling\n      if (vHTML.nodeName !== t.nodeName) {\n        t.parentElement.replaceChild(vHTML, t)\n        return\n      }\n      this.loop(t, vHTML)\n    },\n    // tn = target Node\n    // sn = source Node\n    loop(tn, sn, tOrig) {\n      if (tn || sn) {\n        this.checkNew(tn, sn, tOrig)\n        if (\n          tn &&\n          sn &&\n          tn.nodeName !== sn.nodeName\n        ) {\n          this.checkNodeName(tn, sn)\n        } else if (\n          tn &&\n          sn &&\n          tn.nodeName === sn.nodeName\n        ) {\n          this.checkCtx(tn, sn)\n          tn.nodeType !== 3 &&\n            t.nodeType !== 8 &&\n            this.checkAttrs(tn, sn)\n        }\n      }\n      if (tn && sn) {\n        if (tn.childNodes && sn.childNodes) {\n          this.cfg.lengthDiff = [\n            ...t.childNodes,\n            ...sn.childNodes\n          ]\n        } else {\n          this.cfg.lengthDiff = null\n        }\n        Array.apply(null, this.cfg.lengthDiff).forEach(\n          (node, idx) => {\n            this.cfg.lengthDiff &&\n              this.loop(\n                tn.childNodes[idx],\n                sn.childNodes[idx],\n                tn,\n                sn\n              )\n          }\n        )\n      }\n    },\n    checkNodeName(tn, sn) {\n      const n = sn.cloneNode(true)\n      tn.parentElement.replaceChild(n, tn)\n    },\n    checkAttrs(tn, sn) {\n      const attrs = tn.attributes || []\n      const filteredAttrs = Object.keys(attrs).map(n => attrs[n])\n      const attrsNew = sn.attributes || []\n      const filteredAttrsNew = Object.keys(attrsNew).map(\n        n => attrsNew[n]\n      )\n      filteredAttrs.forEach(o => {\n        return sn.getAttribute(o.name) !== null\n          ? tn.setAttribute(o.name, sn.getAttribute(o.name))\n          : tn.removeAttribute(o.name)\n      })\n      filteredAttrsNew.forEach(a => {\n        return (\n          tn.getAttribute(a.name) !== sn.getAttribute(a.name) &&\n          tn.setAttribute(a.name, sn.getAttribute(a.name))\n        )\n      })\n    },\n    checkCtx(tn, sn) {\n      if (tn.nodeValue !== sn.nodeValue) {\n        tn.textContent = sn.textContent\n      }\n    },\n    checkNew(tn, sn, tParent = this.cfg.orig) {\n      if (sn && tn === undefined) {\n        const newNode = sn.cloneNode(true)\n        tParent.nodeType !== 3 &&\n          tParent.nodeType !== 8 &&\n          tParent.appendChild(newNode)\n      } else if (tn && sn === undefined) {\n        tn.parentElement.removeChild(tn)\n      }\n    }\n  }\n  // t = target\n  // s = source\n  Object.create(job).replace(t, s)\n}\n\n\n/**\n * A stateful component creator\n * @constructor\n * @param {object} state - The component state (model).\n */\nfunction Component(state, schema) {\n  const c = function c(state, schema) {\n    c.setState(state, schema)\n    return !state ? c.container : c\n  }\n\n  const C = Component\n  // register the add-ons\n  const validator = C.validator\n  const emitter = C.emitter\n  const tweenState = C.tweenState\n  const strg = C.storage\n  const devtools = C.devtools\n  const cache = C.memo ? C.memo : function(f){return f;}\n  // used by storage add-on.. maybe try to remove at some point\n  const self = c\n  // re-used a lot..\n  const O = Object\n  const R = RegExp\n\n  // for debouncing render() calls, and window, document\n  let timeout, w, d, raf, t\n\n  c.reactive = true                   // if true, re-render on every state change\n  c.immutable = true                  // if true, freeze the state object after updating it\n  c.debug = devtools ? true : false   //  if true, maintain a history of state changes in `.log`\n  c.scopedCss = true                  // auto prefix component css with a unique id\n  c.state = state                     // component state\n  c.schema = schema                   // component schema (optional)\n\n  // on init, add our initial state to the state history\n  c.log = [{ id: 0, state: state, action: \"init\" }]\n  c.i = c.log.length\n\n  c.view = props => props // the default view (just return the props)\n\n  c.middleware = []\n\n  // a unique ID, used for scoping component CSS\n  c.uid = Math.random()\n    .toString(36)\n    .split(\".\")[1]\n\n  c.isNode =\n    typeof process !== \"undefined\" &&\n    process !== null &&\n    process.versions !== null &&\n    process.versions.node !== null\n\n  if (!c.isNode) {\n    w = window\n    d = document\n    raf = requestAnimationFrame\n    // the <style> elem into which we put our component CSS\n    c.css = d.createElement(\"style\")\n    c.css.id = c.uid\n    d.head.appendChild(c.css)\n  }\n\n  /**\n   * Define chainable named \"actions\" that will update our\n   * state in specific ways and register in our state history\n   */\n  c.actions = actions => {\n    c.actionsList = actions\n    // convert each key/value to set state function:\n    O.keys(actions).forEach(axn => {\n      if (typeof c[axn] !== \"undefined\") return false\n      // add the action as a function\n      c[axn] = newState => {\n        // set current action\n        c.action = axn\n        // run action\n        actions[axn](newState)\n        // make sure the component returns itself, so it's always chainable\n        return c\n      }\n    })\n    return c\n  }\n\n  /**\n   * Used to freeze the component state\n   * @param {object} o - the object to freeze\n   */\n  c.freeze = cache(o => {\n    if (!O.isFrozen(o)) {\n      // Recursively call until all child objects are frozen\n      O.keys(o).forEach(k => c.freeze(o[k]))\n      O.freeze(o)\n    }\n    return o\n  })\n\n  /**\n   * Used to compare the current and next component state\n   * @param {object} x - the object to compare with y\n   * @param {object} y - the object to compare with x\n   */\n  c.eq = cache((x, y) => {\n    const ok = O.keys,\n      tx = typeof x,\n      ty = typeof y\n    return x && y && tx === \"object\" && tx === ty\n      ? ok(x).length === ok(y).length &&\n          ok(x).every(key => c.eq(x[key], y[key]))\n      : String(x) === String(y)\n  })\n\n  /**\n   * Set the component state\n   * @param {object} newState - the new state to update to\n   */\n  c.setState = newState => {\n    const nextState = { ...c.state, ...newState };\n    // get initial state from localStorage, if it's in there\n    if (strg && !c.done) {\n      const pState = strg.getItem(c, nextState);\n      if (pState) newState = { ...newState, ...pState };\n    }\n    c.done = true;\n\n    // enable schema validation using @scottjarvis/validator\n    if (validator && c.schema) {\n      const err = cache(validator(nextState, c.schema))\n      const msg = \"State doesn't match schema:\"\n      if (err.length > 0) {\n        console.error(msg, \"\\n\", err, \"\\n\")\n        throw new Error(msg + \"\\n\" + JSON.stringify(err) + \"\\n\")\n      }\n    }\n    // ...the new state is valid, lets continue\n\n    // update previous and current state\n    c.prev = c.state\n    c.state = { ...c.state, ...nextState }\n\n    if (!c.eq(c.state, c.prev)) {\n\n      if (strg && c.done) {\n        // c.store is just the name of the key in localStorage,\n        // where we keep our JSON stringified state\n        strg.setItem(c, c.state)\n      }\n\n      // re-render component\n      if (c.reactive) c.render(c.container)\n\n      if (t && !c.isNode) cancelAnimationFrame(t)\n\n      // c.tt = component is \"time travelling\" (traversing state history)\n      if (c.debug && c.tt !== true) {\n        // if node, just use setTimeout\n        if (c.isNode) raf = (logFn) => setTimeout(() => logFn(), 1)\n        t = raf(() => {\n          // we are not traversing state history, so add the new state to the log\n          c.log.push({\n            id: c.log.length,\n            state: c.state,\n            action: c.action || \"setState\"\n          })\n          // move along index\n          c.i = c.log.length -1\n        })\n      }\n\n      // log state changes if debug = true\n      //if (c.debug) console.log(c.i, [c.state, ...c.log])\n\n      // freeze state so it can only be changed through setState()\n      if (c.immutable) c.freeze(c.state)\n\n      // if we updated using an \"action\" method, and emitter is avail,\n      // then emit an event with same name as the \"action\" called,\n      // passing in the current state\n      if (typeof emitter !== \"undefined\" && !!c.action) {\n        emitter.emit(`${c.action}`, { ...c.state })\n      }\n\n      // run any middlware functions that were defined by the user\n      c.middleware.forEach(fn => fn({ ...c.state }))\n\n      c.action = undefined\n\n      return c\n    }\n  }\n\n  /**\n   * Tween from the current state to the given state, then set the given\n   * state as the new state.\n   *\n   * @param {object} cfg - the settings used for the tweening\n   *\n   */\n  c.tweenState = (props, cfg) => {\n    typeof tweenState !== \"undefined\"\n      ? tweenState(c, props, cfg)\n      : c(props)\n    return c\n  }\n\n  c.on = (ev, fn) => {\n    typeof emitter !== \"undefined\"\n      ? emitter.on(ev, fn)\n      : false\n    return c\n  }\n\n  c.once = (ev, fn) => {\n    if (typeof emitter !== \"undefined\") {\n      emitter.on(ev, props => {\n        fn(props)\n        emitter.off(ev, fn)\n      })\n    }\n    return c\n  }\n\n  c.off = (ev, fn) => {\n    typeof emitter !== \"undefined\"\n      ? emitter.off(ev, fn)\n      : false\n    return c\n  }\n\n  /**\n   * Travel forward/backward to different states in the state history\n   * @param {number} num - the number of steps through the history to take\n   * @param {string} direction - 'f' for forward, 'b' for backwards\n   */\n  c.go = function(num, dir) {\n    let i\n    if (dir === \"f\") {\n      i = c.i + num\n    } else {\n      i = c.i - num\n    }\n    if (c.log[i]) {\n      c.i = i\n      c.tt = true;\n      c(c.log[i].state) // set state\n      c.tt = false;\n    }\n    return c\n  }\n\n  /**\n   * Go to previous (or first) state in the state history\n   * @param {number} num - the number of steps through the history to take, 0 if 'num' not given\n   */\n  c.rw = function(num) {\n    if (!num) {\n      if (c.log[0]) {\n        c.tt = true;\n        c(c.log[0].state) // set state\n        c.tt = false;\n      }\n      c.i = 0\n      return c\n    }\n    return c.go(num, \"b\")\n  }\n\n  /**\n   * Go to more recent state in the state history\n   * @param {number} num - the number of steps through the history to take, most recent if 'num' not given\n   */\n  c.ff = function(num) {\n    if (!num) {\n      if (c.log[c.log.length - 1]) {\n        c.tt = true;\n        c(c.log[c.log.length - 1].state) // set state\n        c.tt = false;\n      }\n      c.i = c.log.length -1\n      return c\n    }\n    return c.go(num, \"f\")\n  }\n\n  /**\n   * If in browser, puts scoped component styles in c.css\n   */\n  c.setCss = function() {\n    // if in browser\n    if (c && !c.isNode) {\n      // if a style is defined\n      if (c.css && typeof c.style === \"function\") {\n        // get the latest component style\n        let st = c.style(c.state) // the css\n\n        // auto-prefix CSS styles with a unique id,to \"scope\" the\n        // styles to the component only\n        if (c.scopedCss) {\n          const p = c.container.id ? \"#\" : \".\"\n          // get container id, or class if no id\n          let u = c.container.id ? c.container.id : c.container.className\n          // if container has no class or id, use uid\n          u = !!u ? u : c.uid\n\n          // ..these 3 are used for scoping CSS, in setCss()\n          const fx1 = new R(u + \" ,\\\\s*\\\\.\", \"gm\")\n          const fx2 = new R(u + \" ,\\\\s*#\", \"gm\")\n          const fx3 = new R(u + \" ,\\\\s*([a-z\\\\.#])\", \"gmi\")\n          // func to scope css\n          const fx = (v,p,u) =>\n            v.replace(/}/g, \"}\\n\")\n             .replace(/\\;\\s*\\n/g, \";\")\n             .replace(/{\\s*\\n/g, \"{ \")\n             .replace(/^\\s+|\\s+$/gm, \"\\n\")\n             .replace(/(^[\\.#\\w][\\w\\-]*|\\s*,[\\.#\\w][\\w\\-]*)/gm, p + u + \" $1\")\n             .replace(fx1, \", \" + p + u + \" \")\n             .replace(fx2, \", \" + p + u + \" #\")\n             .replace(fx3, \", \" + p + u + \" $1\")\n             .replace(/\\n/g, \"\")\n             .replace(/\\s\\s+/g, \" \")\n           // scope the css\n           st = cache(fx(st,p,u))\n        }\n\n        // minify the CSS\n        const minCss = st.replace(/\\n/g, \"\").replace(/\\s\\s+/g, \" \")\n        // if the new CSS is changed from previous, re-render it\n        if (c.css.innerHTML !== minCss) c.css.innerHTML = minCss\n      }\n    }\n  }\n\n  // used by .toString()\n  const toStr = (view, style) => {\n    let s = '';\n    if (view.outerHTML) {\n      if (style) s = `<style>${style}\\n</style>\\n`\n      s += `${view.outerHTML}`.replace(/^ {4}/gm, \"\")\n    } else if (typeof view === \"string\") {\n      try {\n        // if view is a JSON string\n        s = JSON.parse(view)\n        // return the view as prettified JSON\n        s = JSON.stringify(s, null, 2)\n      } catch (err) {\n        if (style) s = `<style>${style}\\n</style>\\n`\n        s += `${view}`.replace(/^ {4}/gm, \"\")\n      }\n    } else if (typeof view === \"object\" || Array.isArray(view)) {\n      // return the view as prettified JSON\n      s = JSON.stringify(view, null, 2)\n    }\n    //if (c.debug) console.log(s)\n    return s\n  }\n\n  /*\n  * Render the current view as a string, including\n  * our component styling, in a <style> tag\n  */\n  c.toString = function() {\n    let view = c.view(c.state)\n    let str = ''\n    let style = ''\n\n    // get local state\n    if (!c.done && strg) {\n      const pState = strg.getItem(c, c.state);\n      c(pState);\n      view = typeof c.view === \"function\" ? c.view(pState) : view\n    }\n\n    // get component styles, nicely indented\n    if (typeof c.style === \"function\") {\n      style = c.style(c.state).replace(/^ {4}/gm, \"\")\n    }\n\n    return cache(toStr(view,style))\n  }\n\n  /**\n   * Re-render the component and add it to the page\n   * @param {string|element} container - the element which holds the component\n   */\n  c.render = function(el) {\n    if (c.isNode) return c.toString()\n\n    let view = typeof c.view === \"function\" ? c.view(c.state) : null\n\n    // get state from localStorage, if it's in there\n    if (!c.html && strg) {\n      const pState = strg.getItem(c, c.state);\n      view = typeof c.view === \"function\" ? c.view(pState) : null\n      c(pState); // set state\n    }\n    // make sure we have container as an HTML Element\n    if (d && !c.html) el = d.querySelector(el)\n    c.html = c.container = el\n\n    if (timeout) cancelAnimationFrame(timeout)\n\n    timeout = raf(() => {\n      if (c.css && c.style) c.setCss()\n      if (c.container && view) {\n        try {\n          domDiff(c.container.firstElementChild, view.outerHTML ? view.outerHTML : view)\n          // console.log('diffed')\n        } catch (err) {\n          if (view.outerHTML) {\n            c.container.innerHTML = ''\n            c.container.append(view)\n            // console.log('cleared & appended')\n          } else {\n            c.container.innerHTML = view\n            // console.log('replaced innerHTML')\n          }\n        }\n      }\n      // for devtools\n      if (devtools && c.container) {\n        c.container.firstChild.setAttribute('data-uid', c.uid)\n        devtools.populateUI(c.container)\n      }\n    })\n\n    return c.container\n  }\n\n  // for devtools\n  if (!c.isNode) {\n    w.sjComponents = w.sjComponents || {};\n    w.sjComponents[c.uid] = c;\n  }\n\n  return c\n}\n\nexport default Component\n",";(\"use strict\")\n\n// t = target\n// s = source\nconst domDiff = (t, s) => { // from https://codepen.io/tevko/pen/LzXjKE?editors=0010\n  const job = {\n    cfg: {\n      orig: t\n    },\n    // t = target\n    // s = source\n    replace(t, s = t) {\n      const v = document.createElement(\"template\")\n      v.innerHTML = s\n      const vHTML = v.content.firstElementChild\n      if (vHTML.nodeName !== t.nodeName) {\n        t.parentElement.replaceChild(vHTML, t)\n        return\n      }\n      this.loop(t, vHTML)\n    },\n    // tn = target Node\n    // sn = source Node\n    loop(tn, sn, tOrig) {\n      if (tn || sn) {\n        this.checkNew(tn, sn, tOrig)\n        if (\n          tn &&\n          sn &&\n          tn.nodeName !== sn.nodeName\n        ) {\n          this.checkNodeName(tn, sn)\n        } else if (\n          tn &&\n          sn &&\n          tn.nodeName === sn.nodeName\n        ) {\n          this.checkCtx(tn, sn)\n          tn.nodeType !== 3 &&\n            t.nodeType !== 8 &&\n            this.checkAttrs(tn, sn)\n        }\n      }\n      if (tn && sn) {\n        if (tn.childNodes && sn.childNodes) {\n          this.cfg.lengthDiff = [\n            ...t.childNodes,\n            ...sn.childNodes\n          ]\n        } else {\n          this.cfg.lengthDiff = null\n        }\n        Array.apply(null, this.cfg.lengthDiff).forEach(\n          (node, idx) => {\n            this.cfg.lengthDiff &&\n              this.loop(\n                tn.childNodes[idx],\n                sn.childNodes[idx],\n                tn,\n                sn\n              )\n          }\n        )\n      }\n    },\n    checkNodeName(tn, sn) {\n      const n = sn.cloneNode(true)\n      tn.parentElement.replaceChild(n, tn)\n    },\n    checkAttrs(tn, sn) {\n      const attrs = tn.attributes || []\n      const filteredAttrs = Object.keys(attrs).map(n => attrs[n])\n      const attrsNew = sn.attributes || []\n      const filteredAttrsNew = Object.keys(attrsNew).map(\n        n => attrsNew[n]\n      )\n      filteredAttrs.forEach(o => {\n        return sn.getAttribute(o.name) !== null\n          ? tn.setAttribute(o.name, sn.getAttribute(o.name))\n          : tn.removeAttribute(o.name)\n      })\n      filteredAttrsNew.forEach(a => {\n        return (\n          tn.getAttribute(a.name) !== sn.getAttribute(a.name) &&\n          tn.setAttribute(a.name, sn.getAttribute(a.name))\n        )\n      })\n    },\n    checkCtx(tn, sn) {\n      if (tn.nodeValue !== sn.nodeValue) {\n        tn.textContent = sn.textContent\n      }\n    },\n    checkNew(tn, sn, tParent = this.cfg.orig) {\n      if (sn && tn === undefined) {\n        const newNode = sn.cloneNode(true)\n        tParent.nodeType !== 3 &&\n          tParent.nodeType !== 8 &&\n          tParent.appendChild(newNode)\n      } else if (tn && sn === undefined) {\n        tn.parentElement.removeChild(tn)\n      }\n    }\n  }\n  // t = target\n  // s = source\n  Object.create(job).replace(t, s)\n}\n\nlet timeout;\n\nconst render = (view, sel) => {\n  if (!window) return v\n\n  const v = view\n  const c = document.querySelector(sel)\n\n  if (timeout) cancelAnimationFrame(timeout)\n\n  timeout = requestAnimationFrame(() => {\n    if (c.nodeName && v) {\n      domDiff(\n        c,\n        v.outerHTML ? v.outerHTML : `<${c.nodeName} ${c.id ? `id=\"${c.id}\"` : ''} ${c.className ? `class=\"${c.className}\"` : ''}>${v}</${c.nodeName}>`\n      )\n      //console.log('diffed DOM')\n    }\n  });\n\n  return c\n}\n\nexport default render;\n","var performance =\n  typeof process !== \"undefined\" && typeof require !== \"undefined\"\n    ? require(\"perf_hooks\").performance\n    : window.performance\n\nvar now = performance.now,\n  root = typeof window === \"undefined\" ? global : window,\n  vendors = [\"moz\", \"webkit\"],\n  suffix = \"AnimationFrame\",\n  raf = root[\"request\" + suffix],\n  caf = root[\"cancel\" + suffix] || root[\"cancelRequest\" + suffix]\n\nfor (var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + \"Request\" + suffix]\n  caf =\n    root[vendors[i] + \"Cancel\" + suffix] ||\n    root[vendors[i] + \"CancelRequest\" + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif (!raf || !caf) {\n  var last = 0,\n    id = 0,\n    queue = [],\n    frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if (queue.length === 0) {\n      var _now = now(),\n        next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for (var i = 0; i < cp.length; i++) {\n          if (!cp[i].cancelled) {\n            try {\n              cp[i].callback(last)\n            } catch (e) {\n              setTimeout(function() {\n                throw e\n              }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for (var i = 0; i < queue.length; i++) {\n      if (queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nif (typeof module !== \"undefined\") {\n  module.exports.raf = function(fn) {\n    // Wrap in a new function to prevent\n    // `cancel` potentially being assigned\n    // to the native rAF function\n    return raf.call(root, fn)\n  }\n  module.exports.cancel = function() {\n    caf.apply(root, arguments)\n  }\n  module.exports.polyfill = function(object) {\n    if (!object) {\n      object = root\n    }\n    object.requestAnimationFrame = raf\n    object.cancelAnimationFrame = caf\n  }\n}\n\nexport default function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\n","const easing = {\n  // no easing, no acceleration\n  linear: t => t,\n  // accelerating from zero velocity\n  inQuad: t => t * t,\n  // decelerating to zero velocity\n  outQuad: t => t * (2 - t),\n  // acceleration until halfway, then deceleration\n  inOutQuad: t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  // accelerating from zero velocity\n  inCubic: t => t * t * t,\n  // decelerating to zero velocity\n  outCubic: t => --t * t * t + 1,\n  // acceleration until halfway, then deceleration\n  inOutCubic: t =>\n    t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  // accelerating from zero velocity\n  inQuart: t => t * t * t * t,\n  // decelerating to zero velocity\n  outQuart: t => 1 - --t * t * t * t,\n  // acceleration until halfway, then deceleration\n  inOutQuart: t => (t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t),\n  // accelerating from zero velocity\n  inQuint: t => t * t * t * t * t,\n  // decelerating to zero velocity\n  outQuint: t => 1 + --t * t * t * t * t,\n  // acceleration until halfway, then deceleration\n  inOutQuint: t =>\n    t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\n  // elastic bounce effect at the beginning\n  inElastic: t => (0.04 - 0.04 / t) * Math.sin(25 * t) + 1,\n  // elastic bounce effect at the end\n  outElastic: t => ((0.04 * t) / --t) * Math.sin(25 * t),\n  // elastic bounce effect at the beginning and end\n  inOutElastic: t =>\n    (t -= 0.5) < 0\n      ? (0.02 + 0.01 / t) * Math.sin(50 * t)\n      : (0.02 - 0.01 / t) * Math.sin(50 * t) + 1,\n  // slight acceleration from zero to full speed\n  inSin: t => 1 + Math.sin((Math.PI / 2) * t - Math.PI / 2),\n  // slight deceleration at the end\n  outSin: t => Math.sin((Math.PI / 2) * t),\n  // slight acceleration at beginning and slight deceleration at end\n  inOutSin: t => (1 + Math.sin(Math.PI * t - Math.PI / 2)) / 2,\n  // Accelerate exponentially until finish\n  inExpo: t => {\n    if (t === 0) return 0\n    return Math.pow(2, 10 * (t - 1))\n  },\n  //\n  // Initial exponential acceleration slowing to stop\n  outExpo: function(t) {\n    if (t === 1) return 1\n    return -Math.pow(2, -10 * t) + 1\n  },\n  // Exponential acceleration and deceleration\n  inOutExpo: function(t) {\n    if (t === 0 || t === 1) return t\n    var scaledTime = t * 2\n    var scaledTime1 = scaledTime - 1\n    if (scaledTime < 1) return 0.5 * Math.pow(2, 10 * scaledTime1)\n    return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2)\n  },\n  // Slow movement backwards then fast snap to finish\n  inBack: function(t, magnitude) {\n    var m = typeof magnitude !== \"undefined\" ? magnitude : 1.70158\n    return t * t * ((m + 1) * t - m)\n  },\n  // Fast snap to backwards point then slow resolve to finish\n  outBack: function(t, magnitude) {\n    var m = typeof magnitude !== \"undefined\" ? magnitude : 1.70158\n    var scaledTime = t / 1 - 1\n    return scaledTime * scaledTime * ((m + 1) * scaledTime + m) + 1\n  },\n  // Slow movement backwards, fast snap to past finish, slow resolve to finish\n  inOutBack: function(t, magnitude = 1.70158) {\n    var scaledTime = t * 2\n    var scaledTime2 = scaledTime - 2\n    var s = magnitude * 1.525\n    if (scaledTime < 1)\n      return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s)\n    return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2)\n  }\n}\n\nexport default easing\n","import raf from './raf.js'\nimport easing from \"./easings.js\"\n;(\"use strict\")\n\n\n// if no window.performance, use 'perf_hooks' module\n// (from https://stackoverflow.com/questions/23003252/window-performance-now-equivalent-in-nodejs)\nvar performance =\n  typeof process !== \"undefined\" && typeof require !== \"undefined\"\n    ? require(\"perf_hooks\").performance\n    : window.performance\n\n// if no requestAnimationFrame, use the 'raf' polyfill\nvar requestAnimationFrame =\n  typeof window !== \"undefined\" &&\n  typeof window.requestAnimationFrame !== \"undefined\"\n    ? window.requestAnimationFrame\n    : raf\n\n//\n//\n// ES5-loose (transpiled) version of\n// https://github.com/jeremenichelli/phena/blob/master/src/index.js\n//\n\nvar noop = function noop() {}\n\nvar now = function now() {\n  return performance && performance.now ? performance.now() : Date.now()\n}\n\nvar step = function step(context) {\n  var delay = context.delay,\n    from = context.from,\n    to = context.to,\n    duration = context.duration,\n    startTime = context.startTime,\n    easeFn = context.ease,\n    onUpdate = context.onUpdate,\n    onComplete = context.onComplete\n\n  var currentTime = now()\n  var elapsed = currentTime - startTime\n\n  if (delay >= elapsed) {\n    context.frame =\n      requestAnimationFrame(function() {\n        return step(context)\n      }) + 1\n    return\n  }\n\n  // calculate progress according to time and and easing\n  var progress = Math.min(1, (elapsed - delay) / duration)\n\n  // add progress to tween props\n  context.progress = progress\n\n  var values = from.length\n    ? from.map(function(val, index) {\n        var value = val + (to[index] - val) * easeFn(progress)\n        if (Number.isNaN(value)) {\n          value = val + (to[index] - val) * progress\n        }\n        return value\n      })\n    : (() => {\n        var value = from + (to - from) * easeFn(progress)\n        if (Number.isNaN(value)) {\n          value = from + (to - from) * progress\n        }\n        return value\n      })()\n\n  // EDIT by @sc0ttj - pass in the whole context, with values\n  onUpdate({ ...context, values }) // call complete callback or invoke new frame\n\n  // EDIT by @sc0ttj - pass in the whole context, with values\n  if (progress === 1) onComplete({ ...context, values })\n  else\n    context.frame =\n      requestAnimationFrame(function() {\n        return step(context)\n      }) + 1\n}\n\nvar Tween = /*#__PURE__*/ (function() {\n  function Tween(context) {\n    this._c = context\n    this._c.ease = easing[context.ease] || easing[ease]\n    this._c.onUpdate = context.onUpdate || noop\n    this._c.onComplete = context.onComplete || noop\n    this._c.delay = context.delay || 0\n    this._c.duration = context.duration || 200\n    if (!context.paused) this.start()\n  }\n\n  var _proto = Tween.prototype\n\n  _proto.start = function start() {\n    this._c.startTime = now()\n    step(this._c)\n  }\n\n  _proto.cancel = function cancel() {\n    cancelAnimationFrame(this._c.frame)\n  }\n\n  return Tween\n})()\n\nconst tweenState = (self, newState, cfg) => {\n  // define default callbacks\n  var onStart = cfg.onStart ? cfg.onStart : noop\n  var onUpdate = cfg.onUpdate ? cfg.onUpdate : noop\n  var onComplete = cfg.onComplete ? cfg.onComplete : noop\n  var shouldSetState = cfg.shouldSetState ? cfg.shouldSetState : true\n  var onSetState = cfg.onSetState ? cfg.onSetState : noop\n\n  if (typeof shouldSetState === \"boolean\") shouldSetState = () => shouldSetState\n\n  cfg.frame = 1\n  cfg.frameTotal = Math.ceil((60 / 1000) * (cfg.delay + cfg.duration)) + 2\n\n  // for each property in newState, get the value from the given state\n  function getStateToTween(state) {\n    var stateToTween = {}\n    Object.entries(state).forEach(entry => {\n      var key = entry[0]\n      var val = entry[1]\n      if (newState[key]) stateToTween[key] = val\n    })\n    return stateToTween\n  }\n  // get a state matching the shape of newState, but with values from self.state\n  var stateToTween = getStateToTween(self.state)\n\n  // go through properties in the given state, add to the given array\n  function addValues(state, array) {\n    Object.keys(state).forEach((key, index) => {\n      if (typeof state[key] !== \"undefined\") {\n        if (typeof state[key] !== \"object\") {\n          array.push(state[key])\n          return\n        }\n        addValues(state[key], array)\n      }\n    })\n  }\n\n  function setTweenedValues(state, vals) {\n    function reducer(obj, [key, val]) {\n      obj[key] = val\n      if (typeof val === \"number\") {\n        obj[key] = vals.shift()\n      } else if (typeof val === \"object\") {\n        obj[key] = Object.entries(val).reduce(reducer, {})\n      }\n      return obj\n    }\n    var tweenedState = Object.entries(state).reduce(reducer, {})\n    return tweenedState\n  }\n\n  var startValuesArr = []\n  var endValuesArr = []\n  // use current state values as start values\n  addValues(stateToTween, startValuesArr)\n  // use next state values as end values\n  addValues(newState, endValuesArr)\n\n  // execute the tween, set state on completion\n  var tween = new Tween({\n    from: startValuesArr || 0,\n    to: endValuesArr || 1,\n    paused: cfg.paused || false,\n    delay: cfg.delay || 0,\n    duration: cfg.duration || 200,\n    ease: cfg.ease || \"linear\",\n    frame: 1,\n    frameTotal: cfg.frameTotal || 1,\n    onUpdate: props => {\n      // make sure values is an array\n      var tweenedState = setTweenedValues(newState, [...props.values])\n      if (props.frame === 1) onStart(props)\n      // set current tween properties as the new state\n      if (shouldSetState(props)) {\n        self.setState(tweenedState)\n        onSetState(props)\n      }\n      return onUpdate({ ...props, tweenedState })\n    },\n    onComplete: props => {\n      self.setState(newState)\n      return onComplete(props)\n    }\n  })\n\n  return tween\n}\n\nexport default tweenState\n","// from https://raw.githubusercontent.com/jeromeetienne/microevent.js/master/microevent.js\n\n// This is basically \"MicroEvent\", renamed to \"emitter\", with\n// some changes:\n//  - use \"on\", \"off\", \"emit\", instead of \"bind\", \"unbind\", \"trigger\"\n\n// @TODO\n//  1. update \"on\" and \"off\" methods:\n//    - support matching events via regex pattern:\n//    - \"on\":  for all matches, add fn to this._evts[match]\n//    - \"off\": for all matches, rm fn from this._evts[match]\n//  2. allow to pass data/props around in \"emit\" and \"on\"\n\n;(\"use strict\")\n\nconst emitter = {\n  on: function(ev, fn) {\n    this._evs = this._evs || {}\n    this._evs[ev] = this._evs[ev] || []\n    this._evs[ev].push(fn)\n  },\n  off: function(ev, fn) {\n    this._evs = this._evs || {}\n    if (ev in this._evs === false) return false\n    this._evs[ev].splice(this._evs[ev].indexOf(fn), 1)\n  },\n  emit: function(ev /* , args... */) {\n    this._evs = this._evs || {}\n    if (ev in this._evs === false) return false\n    for (var i = 0; i < this._evs[ev].length; i++) {\n      // the \"arguments\" variable holds the current state (see src/component.js:214)\n      this._evs[ev][i].apply(this, Array.prototype.slice.call(arguments, 1))\n    }\n  }\n}\n\nexport default emitter\n","/*\n * html`<div>...</div>`\n * - allows a cleaner, more powerful way to create HTML using JS Template literals:\n *   - auto joins arrays, without adding commas (so no need to keep using .join('') in your templates)\n *   - supports embedding real DOM nodes: Node Lists, HTML Collections, HTML Objects, Elements\n *   - supports embedding JS Objects as HTML attributes, CSS styles, and HTML data attributes:\n *     - `html` works out the context and converts the given object to an appropriate string\n *     - `html` ignores/strips nested child objects when converting to string\n *   - hides falsey stuff (instead of printing \"false\" [etc] in the output)\n *   - returns generated HTML as a string\n *\n * @param {Template Literal} representing a single HTML element\n * @return {String}\n */\n\nconst html = (strings, ...vals) => {\n  // create a property in which to save event attribute funcs, which we'll\n  // later attach to their elements as proper event listeners\n  html.funcs = html.funcs || [];\n  // start: loop over the template content\n  var output = strings.map((str, i) => {\n    html.i = html.i || i;\n    var v = vals[i] || '';\n    // dont ignore zeros\n    if (typeof vals[i] === 'number') v = vals[i]\n    var ctx = 'attr'\n    // workout our current \"context\" (either inside an HTML opening tag,\n    // inside a style attribute, or inside a data-* attribute)\n    if (str.match(/style=(\"|')$/i)) { //\"\n      ctx = 'style'\n    }\n    // check if dealing with a html `data-*` attribute\n    else if (str.match(/data-[a-z0-9\\-_]+=(\"|')$/i)) { //\"\n      ctx = 'dataAttr'\n    }\n\n    // check for a nested component\n    else if (typeof v === 'function' && v.uid && v.state && v.setState && v.render) {\n      ctx = 'nestedComponent'\n    }\n    // check for event attributes like `onclick=\"{someFunc}\"` etc\n    else if (typeof v === 'function'\n        && ctx === 'attr'\n        && str.match(/ on[a-z0-9]+=(\"|')$/i)) //\"\n    {\n      ctx = 'funcAttr'\n    }\n\n\n    // check for either an Element, HTML Collection, Node List, String,\n    // Object, etc):\n    // if current value to process (v) is an HTML Object of any kind,\n    // gets its outer HTML and use that\n    if (v.nodeName && ctx === 'attr') {\n      v = v.outerHTML;\n\n    } else if (ctx === 'nestedComponent' && typeof v === 'function') {\n\n      // *Important* ..We have a nested component, with its own state and\n      // render loop, but without a container.. We don't need or want it to\n      // setState and re-render, we just want it's latest \"view\", which is\n      // also much faster to get than doing a whole setState + re-render\n      str += v.view(v.state)\n      v=''\n\n    } else if (ctx === 'funcAttr' && typeof v === 'function' && !v.uid) {\n      // keep the function for later, but dont include it in output\n      if (Array.isArray(html.funcs)) html.funcs[html.i] = v;\n      // replace `onclick=\"...\" with onclick=\"${i}\" - we'll reference\n      // it later, once it's a real Element, so we can attach funcs[i] to\n      // it, as a proper event listener method\n      v='';\n      str += html.i\n    } else if (Array.isArray(v)) {\n      // if we have a Node List or HTML Collection, convert its\n      // items to strings\n      if (v[0].nodeName) v = v.map(n => `${n.outerHTML}`)\n      // now concat the array itself to string\n      v = v.join('');\n\n    } else if (typeof v === \"object\") {\n      var s = ''; // the string to build from our object (if needed)\n      if (ctx === 'dataAttr') {\n        // if object is for a data attr, add it as JSON\n        s += JSON.stringify(v).trim();\n      } else {\n        // gets the objects properties as strings,\n        // while ignoring nested objects, arrays etc\n        for (var p in v) {\n          if (p && v && v.hasOwnProperty(p) && typeof v[p] !== \"object\") {\n            // if inside a style attr, return `key: val;`\n            // if inside an HTML tag, return ` key=\"val\"`\n            if (ctx === 'style') s += `${p}:${v[p]};`;\n            if (ctx === 'attr')  s += ` ${p}=\"${v[p]}\"`;\n          }\n        }\n      }\n      // now we've built the appropriate string, set it as the value to\n      // add to our template\n      v = s\n    }\n    // fix not returning zeros (JS treats them as \"falsey\")\n    if (vals[i] === 0) v = \"0\"\n    // now we've converted `v` to a string version of whatever is was,\n    // we can return the current string, with `v` appended, and then\n    // move to next iteration\n\n    html.i += 1;\n    return str ? str + (v || '') : '';\n  }).join('');\n\n  // return the compiled HTML as a string\n  return output;\n}\n\nexport default html\n","import html from './html'\n\n/**\n * htmel`<div>...</div>`\n * - allows a cleaner, more powerful way to create HTML using JS Template literals:\n *   - auto joins arrays, without adding commas (so no need to keep using .join('') in your templates)\n *   - supports embedding real DOM nodes: Node Lists, HTML Collections, HTML Objects, Elements\n *   - supports embedding JS Objects as HTML attributes, CSS styles, and HTML data attributes:\n *     - `html` works out the context and converts the given object to an appropriate string\n *     - `html` ignores/strips nested child objects when converting to string\n *   - supports embedding functions in event attributes:\n *     - `htmel` will attach them as callbacks to the relevant Event Listeners\n *   - hides falsey stuff (instead of printing \"false\" [etc] in the output)\n *   - returns the generated HTML as an HTML Object (browser) or a string (NodeJS)\n *\n * @param {Template Literal} HTML representing a single element\n * @return {Element|String}\n */\nconst htmel = (strings, ...vals) => {\n  var out = html(strings, ...vals).trim(); // use .trim() so we never return a text node of whitespace as the result\n  // if not in a browser, return the HTML as a string\n  if (!document) return out;\n  // else, return the HTML as a proper HTML Object\n  var t = document.createElement('template');\n  t.innerHTML = out;\n  // get all elems inside our template\n  var elems = t.content.firstChild.children;\n  // for each elem, get its attributes\n  for (var i = 0; i < elems.length; i++) {\n    var attrs = elems[i].attributes;\n    // for each attribute, check it starts with `on`\n    for (var q = 0; q < attrs.length; q++) {\n      var attr = attrs[q];\n      if (attr.name.match(/^on/)) {\n        // if attribute starts with \"on\", remove it\n        elems[i].removeAttribute(attr.name);\n        // and assign the function as a proper event listener instead\n        elems[i].addEventListener(attr.name.replace(/^on/, ''), html.funcs[attr.value])\n      }\n    }\n  }\n  return t.content.firstChild;\n}\n\nexport default htmel\n","/**\n * Enable persistant storage using localStorage\n */\nconst storage = {\n\n  getItem: (c, state) => {\n    if (!c.store) return state;\n    // console.log('getItem:', c.store, state);\n    const s = JSON.parse(localStorage.getItem(c.store))\n    return s ? { ...state, ...s } : state;\n  },\n\n  setItem: (c, state) => {\n    if (!c.store) return state;\n\n    // if Component.syncTabs is available, also keep browser tabs in\n    // sync - syncTabs will create an event which monitors localStorage\n    // changes and re-renders the given component if it's storage changed.\n    if (!c.isNode && Component.syncTabs) {\n        window.syncTab  = window.syncTab || [];\n        if (!window.syncTab[c.uid]) Component.syncTabs(c)\n    }\n\n    localStorage.setItem(c.store, JSON.stringify(state))\n  }\n\n};\n\nexport default storage;\n","/**\n * Synchronize state updates and page renders between browser tabs\n * @param {func} c - the component to re-render when it's storage updates/changes\n */\nconst syncTabs = function(c) {\n  if (c.isNode || !window) return;\n  // the \"storage\" event fires when localStorage is updated\n  window.addEventListener('storage', function (event) {\n    // if the storage obj that changed is the given components \"store\",\n    // then add the new \"store\" data to the latest state\n    if (event.key === c.store) {\n      let newState = JSON.parse(event.newValue);\n      c.setState({ ...c.state, ...newState })\n    }\n  });\n  window.syncTab[c.uid] = true\n};\n\nexport default syncTabs;\n"],"names":["domDiff","t","s","job","cfg","orig","[object Object]","v","document","createElement","innerHTML","vHTML","content","firstChild","nextElementSibling","nodeName","this","loop","parentElement","replaceChild","tn","sn","tOrig","checkNew","checkNodeName","checkCtx","nodeType","checkAttrs","childNodes","lengthDiff","Array","apply","forEach","node","idx","n","cloneNode","attrs","attributes","filteredAttrs","Object","keys","map","attrsNew","filteredAttrsNew","o","getAttribute","name","setAttribute","removeAttribute","a","nodeValue","textContent","tParent","undefined","newNode","appendChild","removeChild","create","replace","Component","state","schema","c","setState","container","C","validator","emitter","tweenState","strg","storage","devtools","cache","memo","f","O","R","RegExp","timeout","w","d","raf","reactive","immutable","debug","scopedCss","i","log","id","action","length","view","props","middleware","uid","Math","random","toString","split","isNode","process","versions","window","requestAnimationFrame","css","head","actions","actionsList","axn","newState","freeze","isFrozen","k","eq","x","y","ok","tx","every","key","String","nextState","done","pState","getItem","err","msg","console","error","Error","JSON","stringify","prev","setItem","render","cancelAnimationFrame","tt","logFn","setTimeout","push","emit","fn","on","ev","once","off","go","num","dir","rw","ff","setCss","style","st","p","u","className","fx1","fx2","fx3","fx","minCss","outerHTML","parse","isArray","toStr","el","html","querySelector","firstElementChild","append","populateUI","sjComponents","sel","now","require","performance","root","global","vendors","suffix","caf","last","queue","callback","_now","next","max","cp","slice","cancelled","e","round","handle","module","exports","call","cancel","arguments","polyfill","object","easing","linear","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inElastic","sin","outElastic","inOutElastic","inSin","PI","outSin","inOutSin","inExpo","pow","outExpo","inOutExpo","scaledTime","scaledTime1","inBack","magnitude","m","outBack","inOutBack","scaledTime2","noop","Date","Tween","context","_c","ease","onUpdate","onComplete","delay","duration","paused","start","_proto","prototype","startTime","step","from","to","easeFn","elapsed","frame","progress","min","value","values","val","index","Number","isNaN","self","onStart","shouldSetState","onSetState","addValues","array","frameTotal","ceil","startValuesArr","endValuesArr","stateToTween","entries","entry","getStateToTween","vals","tweenedState","reduce","reducer","obj","shift","_evs","splice","indexOf","strings","funcs","str","ctx","match","join","trim","hasOwnProperty","htmel","out","elems","children","q","attr","addEventListener","store","localStorage","syncTabs","syncTab","event","newValue"],"mappings":"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"}