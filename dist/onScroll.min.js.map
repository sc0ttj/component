{"version":3,"file":"onScroll.min.js","sources":["../src/onScroll.js"],"sourcesContent":["const onScroll = (fn, c) => {\n  if (!document) return;\n\n  const cb = function() {\n    // get document bounds\n    const pageBounds = document.body.getBoundingClientRect();\n    // get guideline (marker) position\n    const offset = c.onScroll.offset || 35;\n    const guideline = document.documentElement.clientHeight / 100 * offset; // 50% of page height\n    // debounce scroll updates to 60fps\n    requestAnimationFrame(totalFrames => {\n      // get component position, relative to guideline (marker)\n      const bounds = c.html.getBoundingClientRect();\n      const outside = bounds.top > guideline || bounds.bottom < guideline;\n      let progress = (guideline - bounds.top) / bounds.height;\n      if (bounds.top >= guideline) progress = 0;\n      if (bounds.bottom <= guideline) progress = 1;\n      c.onScroll.frame = !outside ? (c.onScroll.frame || 0) + 1 : 0;\n      //\n      let direction = null;\n      if (c.onScroll.frame !== 0) {\n        direction = c.onScroll.prevPos < progress ? 'down' : 'up'\n      }\n      // setup the props to return\n      const scrollProps = {\n        frame: c.onScroll.frame,\n        totalFrames: +totalFrames.toFixed(0),\n        progress: +progress.toFixed(2),\n        direction: direction,\n      };\n      // run the given function, pass in current scroll props\n      fn(scrollProps)\n      c.onScroll.prevPos = progress;\n    });\n  };\n\n  if (!c.onScroll.ready) {\n    window.addEventListener('scroll', cb);\n    c.onScroll.ready = true;\n    console.log('added SCROLL event');\n  }\n}\n\nexport default onScroll;\n"],"names":["fn","c","document","cb","body","getBoundingClientRect","offset","onScroll","guideline","documentElement","clientHeight","requestAnimationFrame","totalFrames","bounds","html","outside","top","bottom","progress","height","frame","direction","prevPos","scrollProps","toFixed","ready","window","addEventListener","console","log"],"mappings":"+OAAiB,CAACA,EAAIC,KACpB,IAAKC,SAAU,OAEf,MAAMC,EAAK,WAEUD,SAASE,KAAKC,wBAEjC,MAAMC,EAASL,EAAEM,SAASD,QAAU,GAC9BE,EAAYN,SAASO,gBAAgBC,aAAe,IAAMJ,EAEhEK,sBAAsBC,IAEpB,MAAMC,EAASZ,EAAEa,KAAKT,wBAChBU,EAAUF,EAAOG,IAAMR,GAAaK,EAAOI,OAAST,EAC1D,IAAIU,GAAYV,EAAYK,EAAOG,KAAOH,EAAOM,OAC7CN,EAAOG,KAAOR,IAAWU,EAAW,GACpCL,EAAOI,QAAUT,IAAWU,EAAW,GAC3CjB,EAAEM,SAASa,MAASL,EAAwC,GAA7Bd,EAAEM,SAASa,OAAS,GAAK,EAExD,IAAIC,EAAY,KACS,IAArBpB,EAAEM,SAASa,QACbC,EAAYpB,EAAEM,SAASe,QAAUJ,EAAW,OAAS,MAGvD,MAAMK,EAAc,CAClBH,MAAOnB,EAAEM,SAASa,MAClBR,aAAcA,EAAYY,QAAQ,GAClCN,UAAWA,EAASM,QAAQ,GAC5BH,UAAWA,GAGbrB,EAAGuB,GACHtB,EAAEM,SAASe,QAAUJ,KAIpBjB,EAAEM,SAASkB,QACdC,OAAOC,iBAAiB,SAAUxB,GAClCF,EAAEM,SAASkB,OAAQ,EACnBG,QAAQC,IAAI"}