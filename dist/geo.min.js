!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Geo=e()}(this,(function(){"use strict";const t=Math.PI/180,e=t=>void 0!==t;function o(t,e,o,n){this.mapWidth=t,this.mapHeight=e,this.earthRadius=t/2.666269758/2,this.offsetX=void 0===o?0:o,this.offsetY=void 0===n?0:n,this.AA=[.8487,.84751182,.84479598,.840213,.83359314,.8257851,.814752,.80006949,.78216192,.76060494,.73658673,.7086645,.67777182,.64475739,.60987582,.57134484,.52729731,.48562614,.45167814],this.BB=[0,.0838426,.1676852,.2515278,.3353704,.419213,.5030556,.5868982,.67182264,.75336633,.83518048,.91537187,.99339958,1.06872269,1.14066505,1.20841528,1.27035062,1.31998003,1.3523]}function n(t,e,o,n,i,s){this.mapWidth=t,this.mapHeight=e,this.topLatitudeRelative=this.getScreenYRelative(o),this.bottomLatitudeRelative=this.getScreenYRelative(n),this.leftLongitudeRadians=this.degToRadians(i),this.rightLongitudeRadians=this.degToRadians(s)}o.prototype.latLongToPx=function(t,e){const o=function(t){return t<0?-1:1},n=o(e),i=0-o(t);e=Math.abs(e),t=Math.abs(t);let s=(a=5,h=t-1e-10,Math.floor(h/a)*a);var a,h;s=0===t?0:s;const r=s/5,u=(s+5)/5,c=(t-s)/5,f=(this.AA[u]-this.AA[r])*c+this.AA[r],l=(this.BB[u]-this.BB[r])*c+this.BB[r],p={x:f*e*.017453293*n*this.earthRadius+this.offsetX,y:l*i*this.earthRadius+this.offsetY};return[p.x,p.y]},o.prototype.pxToLatLong=function(t,e){return"TODO"},n.prototype.latLongToPx=function(t,e){return[this.getScreenX(e),this.getScreenY(t)]},n.prototype.getScreenY=function(t){return this.mapHeight*(this.getScreenYRelative(t)-this.topLatitudeRelative)/(this.bottomLatitudeRelative-this.topLatitudeRelative)},n.prototype.getScreenX=function(t){const e=this.degToRadians(t);return this.mapWidth*(e-this.leftLongitudeRadians)/(this.rightLongitudeRadians-this.leftLongitudeRadians)},n.prototype.getScreenYRelative=function(t){return Math.log(Math.tan(t/360*Math.PI+Math.PI/4))},n.prototype.degToRadians=function(e){return e*t},n.prototype.pxToLatLong=function(t,e){return[this.yToLat(e),this.xToLon(t)]},n.prototype.xToLon=function(t){return 6.705522537e-7*t-180},n.prototype.yToLat=function(t){const e=2.718281828459045,o=268435456,n=85445659.4471;return Math.asin(Math.pow(e,2*o/n-2*t/n)/(Math.pow(e,2*o/n-2*t/n)+1)-1/(Math.pow(e,2*o/n-2*t/n)+1))/.017453292519943};const i=function(e,o,n,i){const s=(n-e)*t,a=(i-o)*t,h=12742*Math.asin(Math.sqrt(.5-Math.cos(s)/2+Math.cos(e*t)*Math.cos(n*t)*(1-Math.cos(a))/2));return Math.round(100*h)/100},s=function(t,e,o,n){const[i,s]=this.latLongToPx(t,e),[a,h]=this.latLongToPx(o,n),r=i-a,u=h-h;return Math.round(100*Math.sqrt(r*r+u*u))/100},a=function(t,o){const n=this.getDistanceInKm;if(e(t.lat)&&e(t.long)){return[...o].sort((e,o)=>n(t.lat,t.long,e.lat,e.long)-n(t.lat,t.long,o.lat,o.long))}throw Error('Supply an object with "lat" and "long" properties')},h=function(t){return.621371192*t},r=function(t){return 1.609344*t};[o,n].forEach(t=>{const e=t.prototype;e.getDistanceInKm=i,e.getDistanceInPx=s,e.getNearestTo=a,e.kmToMiles=h,e.milesToKm=r});return function(t){const e=t.width||300,i=t.height||150,s=t.projection.toLowerCase();let a;if(t.projection&&"robinson"===s)a=new o(e,i,t.offsetX||0,t.offsetY||0);else{const o={lat:{min:-85.05115,max:85.05115},lng:{min:-180,max:180}};a=new n(e,i,t.top||o.lat.max,t.bottom||o.lat.min,t.left||o.lng.min,t.right||o.lng.max)}return a.projection=s,a.height=i,a.width=e,a.rKm=6366.197723675814,a.rMiles=3955.771869579042,a}}));
//# sourceMappingURL=geo.min.js.map
