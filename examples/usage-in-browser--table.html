<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="../dist/component.min.js"></script>
<script src="../dist/htmel.min.js"></script>
<script>
  // define the component

  var state = {
    title: "Title goes here",
    subTitle: "Sub-title goes here",
    attrs: {
      "class": "foo bar",
      "z-index": 2,
    },
    css: {
      "font-weight": "bold",
      "color": "red",
      unused: {
        "font-size": "2em",
      },
    },
    headings: [ "Country", "0-10", "11-20", "21-30", "31-40", "older" ],
    content: [
      [ "England", 10, 20, 30, 20, 20 ],
      [ "France",  10, 20, 30, 30, 10 ],
      [ "Germany", 1, 2, 3, 3, 1 ],
    ],
    source: null
  };

  var Table = new Component(state);

  var TableRows = props => props.map(row =>
    htmel`<tr>
      ${row.map((item, i) => `<td>${row[i]}</td>`)}
    </tr>`);

  Table.view = props =>
    htmel`<div ${props.attrs}>
      <h2>${props.title}</h2>
      <p style="${props.css}">${props.subTitle}</p>
      <table>
      <thead>
        <tr>${props.headings.map(h => `<td>${h}</td>`)}</tr>
      </thead>
      <tbody>
        ${TableRows(props.content)}
      </tbody>
      </table>
      ${props.source && `<p>Source: ${props.source}</p>`}
    </div>`;

  Table.style = props => `
    table { display: table; }
    thead { font-weight: bold; }
    td { min-width: 50px; padding: 4px; border: 1px solid grey; }
    `;

  Table.actions({
    add: props => Table.setState({ content: [ ...Table.state.content, props] })
  });

</script>
</head>

<body>
  <div>
    <div class="table"></div>
    <button id="add-more" onclick="Table.addRow()">Add row</button>
  </div>

  <script>
  // add component to page
  Table.render('.table');
  // update the component
  Table({ title: "Awesome Table" });
  Table.add([ "USA", 61, 32, 83, 14, 56 ]);
  Table.add([ "Japan", 1, 2, 3, 4, 5 ]);
  Table.add([ "China", 12, 23, 344, 42, 245 ]);

  // use event delegation to add user interactivity (recommended)
  Table.html.addEventListener("click", e => {
    var el = e.target.nodeName.toLowerCase();
    console.log(`You clicked a  <${el}>  element.`);
  });

  // ..or add your own methods to the component
  Table.addRow = e => Table.add([ "Buttonland", 12, 23, 344, 42, 245 ]);

  </script>
</body>

</html>
